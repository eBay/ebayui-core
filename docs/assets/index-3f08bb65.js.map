{"version":3,"file":"index-3f08bb65.js","sources":["../../src/components/components/ebay-tooltip-overlay/constants.js","../../src/components/components/ebay-tooltip-overlay/component-browser.js","../../src/components/components/ebay-tooltip-overlay/index.marko","../../src/components/components/ebay-tooltip-base/component-browser.js","../../src/components/components/ebay-tooltip-base/index.marko"],"sourcesContent":["export const typeRoles = {\n    tourtip: \"region\",\n    tooltip: \"tooltip\",\n};\n\n// Added scale3d for safari to trigger gpu rerendering to fix a bug with filter\nexport const pointerStyles = {\n    left: {\n        transform: \"translateX(16px) translateY(-50%) scale3d(1,1,1)\",\n        left: \"100%\",\n        right: \"auto\",\n        top: \"-6px\",\n        bottom: \"auto\",\n    },\n    \"left-top\": {\n        transform: \"translateX(16px) scale3d(1,1,1)\",\n        left: \"100%\",\n        right: \"auto\",\n        top: \"-100%\",\n        bottom: \"auto\",\n    },\n    \"left-bottom\": {\n        transform: \"translateX(16px) scale3d(1,1,1)\",\n        left: \"100%\",\n        right: \"auto\",\n        top: \"auto\",\n        bottom: \"-8px\",\n    },\n    right: {\n        transform: \"translateX(-16px) translateY(-50%) scale3d(1,1,1)\",\n        left: \"auto\",\n        right: \"100%\",\n        top: \"-6px\",\n        bottom: \"auto\",\n    },\n    \"right-top\": {\n        transform: \"translateX(-16px) scale3d(1,1,1)\",\n        left: \"auto\",\n        right: \"100%\",\n        top: \"-100%\",\n        bottom: \"auto\",\n    },\n    \"right-bottom\": {\n        transform: \"translateX(-16px) scale3d(1,1,1)\",\n        left: \"auto\",\n        right: \"100%\",\n        top: \"auto\",\n        bottom: \"calc(-50% + 2px)\",\n    },\n    top: {\n        transform: \"translateX(-50%) scale3d(1,1,1)\",\n        left: \"50%\",\n        right: \"auto\",\n        top: \"calc(100% - 2px)\",\n        bottom: \"auto\",\n    },\n    \"top-left\": {\n        transform: \"scale3d(1,1,1)\",\n        left: \"-6px\",\n        right: \"auto\",\n        top: \"calc(100% - 2px)\",\n        bottom: \"auto\",\n    },\n    \"top-right\": {\n        transform: \"scale3d(1,1,1)\",\n        left: \"auto\",\n        right: \"-5px\",\n        top: \"calc(100% - 2px)\",\n        bottom: \"auto\",\n    },\n    \"bottom-right\": {\n        transform: \"scale3d(1,1,1)\",\n        left: \"auto\",\n        right: \"-5px\",\n        top: \"auto\",\n        bottom: \"calc(100% + 12px)\",\n    },\n    \"bottom-left\": {\n        transform: \"scale3d(1,1,1)\",\n        left: \"-8px\",\n        right: \"auto\",\n        top: \"auto\",\n        bottom: \"calc(100% + 12px)\",\n    },\n    bottom: {\n        transform: \"translateX(-50%) scale3d(1,1,1)\",\n        left: \"50%\",\n        right: \"auto\",\n        top: \"auto\",\n        bottom: \"calc(100% + 12px)\",\n    },\n};\n","export default {\n    handleCloseButton(originalEvent) {\n        this.emit(\"overlay-close\", { originalEvent });\n    },\n};\n","import { processHtmlAttributes } from \"../../../common/html-attributes\";\nimport * as constants from \"./constants\";\n\nstatic function noop() {}\nstatic var typeRoles = constants.typeRoles;\nstatic var pointerStyles = constants.pointerStyles;\nstatic var ignoredHeaderAttributes = [\"id\", \"as\", \"class\"];\n\n$ input.toJSON = noop;\n\n$ var hasUserStyles = (\n    input.styleTop ||\n    input.styleLeft ||\n    input.styleRight ||\n    input.styleBottom\n);\n$ var overlayStyles = hasUserStyles ? {\n    top: input.styleTop,\n    left: input.styleLeft,\n    right: input.styleRight,\n    bottom: input.styleBottom\n} : pointerStyles[input.pointer || \"bottom\"];\n$ var heading = input.heading;\n\n<span\n    id=input.id\n    class=`${input.type}__overlay`\n    role=typeRoles[input.type]\n    aria-labelledby=(\n        input.type === \"tourtip\" &&\n        heading &&\n        component.elId(\"tourtip-label\")\n    )\n    style=overlayStyles>\n    <span class=`${input.type}__pointer ${input.type}__pointer--${input.pointer}`/>\n    <span class=`${input.type}__mask`>\n        <span class=`${input.type}__cell`>\n            <span class=`${input.type}__content`>\n                <if(heading)>\n                    <${heading.as || \"span\"}\n                        ...processHtmlAttributes(heading, ignoredHeaderAttributes)\n                        class=[`${input.type}__heading`, input.heading.class]\n                        id:scoped=\"tourtip-label\">\n                        <${heading.renderBody}/>\n                    </>\n                </if>\n                <if(input.content)>\n                    <${Object.keys(input.content).length > 1 && \"span\"}\n                        ...processHtmlAttributes(input.content)>\n                        <${input.content.renderBody}/>\n                    </>\n                </if>\n            </span>\n            <if(input.type !== \"tooltip\")>\n                <button\n                    aria-label=input.a11yCloseText\n                    class=['icon-btn', 'icon-btn--transparent', `${input.type}__close`]\n                    type=\"button\"\n                    onClick(\"handleCloseButton\")>\n                    <ebay-close-16-icon/>\n                </button>\n            </if>\n            <if (input.footer)>\n                <span class=[`${input.type}__footer`, input.footer.class]>\n                    <${input.footer}/>\n                </span>\n            </if>\n        </span>\n    </span>\n</span>\n","import Expander from \"makeup-expander\";\nimport focusables from \"makeup-focusables\";\n\nexport default {\n    handleExpand() {\n        this.emit(\"base-expand\");\n    },\n\n    handleCollapse() {\n        this.emit(\"base-collapse\");\n    },\n\n    onMount() {\n        this._setupBaseTooltip();\n    },\n\n    onUpdate() {\n        this._setupBaseTooltip();\n    },\n\n    onInput(input) {\n        if (input.open === true) {\n            this.action = \"expand\";\n        } else if (input.open === false) {\n            this.action = \"collapse\";\n        }\n    },\n\n    onRender() {\n        if (typeof window !== \"undefined\") {\n            this._cleanupMakeup();\n        }\n    },\n\n    collapse() {\n        this._expander.expanded = false;\n    },\n\n    expand() {\n        this._expander.expanded = true;\n    },\n\n    isExpanded() {\n        return this._expander.expanded;\n    },\n\n    onDestroy() {\n        this._cleanupMakeup();\n    },\n\n    _setupExpander(host, hostSelector) {\n        const { input } = this;\n        const { type } = input;\n        const container = this.getEl(\"container\");\n        const isTooltip = type === \"tooltip\";\n        const isInfotip = type === \"infotip\";\n        const isTourtip = type === \"tourtip\";\n        const expanderEl = container.getElementsByClassName(type)[0];\n\n        if (host && !isTourtip) {\n            this._expander = new Expander(expanderEl, {\n                hostSelector: hostSelector,\n                contentSelector: `.${type}__overlay`,\n                expandedClass: `${type}--expanded`,\n                focusManagement: null,\n                expandOnFocus: isTooltip,\n                expandOnHover: isTooltip && !input.noHover,\n                expandOnClick: isInfotip,\n                autoCollapse: isTooltip,\n            });\n\n            if (isTooltip && !host.hasAttribute(\"aria-describedby\")) {\n                host.setAttribute(\"aria-describedby\", input.overlayId);\n            }\n        }\n    },\n\n    _setupBaseTooltip() {\n        if (this.input.type !== \"dialog--mini\") {\n            this._setupMakeup();\n        }\n        if (this.action && this._expander) {\n            if (this.action === \"expand\") {\n                this.expand();\n            } else if (this.action === \"collapse\") {\n                this.collapse();\n            }\n            this.action = null;\n        }\n    },\n\n    _setupMakeup() {\n        const { input } = this;\n        const { type } = input;\n        const container = this.getEl(\"container\");\n        const hostClass = `${type}__host`;\n        const hostSelector = `.${hostClass}`;\n        let host = container.querySelector(hostSelector);\n\n        if (!host) {\n            if (this.cancelFocus) {\n                this.cancelFocus();\n            }\n\n            this.cancelFocus = focusables(container, false, (curFocusables) => {\n                const curFocusable = curFocusables[0];\n                if (curFocusable) {\n                    host = curFocusable;\n\n                    if (!curFocusable.classList.contains(hostClass)) {\n                        curFocusable.classList.add(hostClass);\n                    }\n                }\n                this._setupExpander(host, hostSelector);\n            });\n        } else {\n            this._setupExpander(host, hostSelector);\n        }\n    },\n\n    _cleanupMakeup() {\n        if (this.cancelFocus) {\n            this.cancelFocus();\n        }\n\n        if (this._expander) {\n            this._expander.destroy();\n            this._expander = undefined;\n        }\n    },\n};\n","static function toJSON() {\n    // Only serialize the following to the browser if we are a top level component.\n    return {\n        type: this.type,\n        noHover: this.noHover,\n        overlayId: this.overlayId\n    }\n}\n\n$ input.toJSON = toJSON;\n\n<span\n    key=\"container\"\n    onExpander-expand(\"handleExpand\")\n    onExpander-collapse(\"handleCollapse\")\n    overlay-style=input.overlayStyle>\n    <${input.renderBody}/>\n</span>\n"],"names":["typeRoles","pointerStyles","_marko_split_component$1","originalEvent","noop","constants","ignoredHeaderAttributes","_marko_registerComponent","_marko_componentType","_marko_split_component","_marko_component","_marko_template","_","_marko_renderer","input","out","_componentDef","_component","state","$global","toJSON","hasUserStyles","styleTop","styleLeft","styleRight","styleBottom","overlayStyles","top","left","right","bottom","pointer","heading","be","id","_marko_class_merge","concat","type","elId","e","_marko_dynamic_tag","as","_objectSpread","processHtmlAttributes","class","renderBody","content","_tagName","Object","keys","length","_marko_attrs","bf","ee","ef","a11yCloseText","d","_marko_tag","_ebayClose16Icon","footer","t","s","Component","_marko_defineComponent","host","hostSelector","container","isTooltip","isInfotip","isTourtip","expanderEl","Expander","hostClass","focusables","curFocusables","curFocusable","noHover","overlayId","overlayStyle"],"mappings":"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"}