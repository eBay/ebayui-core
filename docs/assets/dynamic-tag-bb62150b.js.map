{"version":3,"file":"dynamic-tag-bb62150b.js","sources":["../../node_modules/marko/dist/runtime/helpers/dynamic-tag.js"],"sourcesContent":["\"use strict\";\n\n\nvar changeCase = require(\"./_change-case\");\nvar ComponentsContext = require(\"../components/ComponentsContext\");\nvar getComponentsContext = ComponentsContext.R_;\nvar ComponentDef = require(\"../components/ComponentDef\");\nvar w10NOOP = require(\"warp10/constants\").NOOP;\nvar RENDER_BODY_TO_JSON = function () {\n  return w10NOOP;\n};\n\nvar FLAG_WILL_RERENDER_IN_BROWSER = 1;\n// var FLAG_HAS_RENDER_BODY = 2;\nvar IS_SERVER = typeof document === \"undefined\";\n\n/**\n * Helper to render a dynamic tag\n */\nmodule.exports = function dynamicTag(\nout,\ntag,\ngetAttrs,\nrenderBody,\nargs,\nprops,\ncomponentDef,\nkey,\ncustomEvents)\n{\n  if (tag) {\n    if (tag.default) {\n      tag = tag.default;\n    }\n\n    var attrs = getAttrs && getAttrs();\n    var component = componentDef && componentDef.r_;\n    if (typeof tag === \"string\") {\n      if (renderBody) {\n        out.bh_(\n          tag,\n          attrs,\n          key,\n          componentDef,\n          addEvents(componentDef, customEvents, props)\n        );\n        renderBody(out);\n        out.bi_();\n      } else {\n        out.bj_(\n          tag,\n          attrs,\n          key,\n          componentDef,\n          addEvents(componentDef, customEvents, props)\n        );\n      }\n    } else {\n      if (attrs == null) {\n        attrs = { renderBody: renderBody };\n      } else if (typeof attrs === \"object\") {\n        attrs = attrsToCamelCase(attrs);\n        if (renderBody) {\n          attrs.renderBody = renderBody;\n        }\n      }\n\n      var renderer =\n      tag._ || (\n      tag.renderer ? tag.renderer.renderer || tag.renderer : tag.render);\n\n      // eslint-disable-next-line no-constant-condition\n\n\n\n\n\n\n\n\n      if (renderer) {\n        out.c(componentDef, key, customEvents);\n        renderer(attrs, out);\n        out._X_ = null;\n      } else {\n        var render = tag && tag.renderBody || tag;\n        var isFn = typeof render === \"function\";\n\n        // eslint-disable-next-line no-constant-condition\n\n\n\n\n\n\n\n        if (isFn) {\n          var flags = componentDef ? componentDef.t_ : 0;\n          var willRerender = flags & FLAG_WILL_RERENDER_IN_BROWSER;\n          var isW10NOOP = render === w10NOOP;\n          var preserve = IS_SERVER ? willRerender : isW10NOOP;\n          out.bf(key, component, preserve);\n          if (!isW10NOOP && isFn) {\n            var componentsContext = getComponentsContext(out);\n            var parentComponentDef = componentsContext.n_;\n            var globalContext = componentsContext.o_;\n            componentsContext.n_ = new ComponentDef(\n              component,\n              parentComponentDef.id + \"-\" + parentComponentDef.aK_(key),\n              globalContext\n            );\n            render.toJSON = RENDER_BODY_TO_JSON;\n\n            if (args) {\n              render.apply(null, [out].concat(args, attrs));\n            } else {\n              render(out, attrs);\n            }\n\n            componentsContext.n_ = parentComponentDef;\n          }\n          out.ef();\n        } else {\n          out.error(\"Invalid dynamic tag value\");\n        }\n      }\n    }\n  } else if (renderBody) {\n    out.bf(\n      key,\n      component,\n      IS_SERVER &&\n      componentDef &&\n      componentDef.t_ & FLAG_WILL_RERENDER_IN_BROWSER\n    );\n    renderBody(out);\n    out.ef();\n  }\n};\n\nfunction attrsToCamelCase(attrs) {\n  var result = {};\n\n  for (var key in attrs) {\n    result[changeCase.bg_(key)] = attrs[key];\n  }\n\n  return result;\n}\n\nfunction addEvents(componentDef, customEvents, props) {\n  var len = customEvents ? customEvents.length : 0;\n\n  if (len === 0) {\n    return props;\n  }\n\n  var result = props || {};\n  var event;\n\n  for (var i = len; i--;) {\n    event = customEvents[i];\n    result[\"on\" + event[0]] = componentDef.d(\n      event[0],\n      event[1],\n      event[2],\n      event[3]\n    );\n  }\n\n  return result;\n}"],"names":["changeCase","require$$0","ComponentsContext","require$$1","getComponentsContext","ComponentDef","require$$2","w10NOOP","require$$3","RENDER_BODY_TO_JSON","FLAG_WILL_RERENDER_IN_BROWSER","IS_SERVER","dynamicTag","out","tag","getAttrs","renderBody","args","props","componentDef","key","customEvents","attrs","component","addEvents","attrsToCamelCase","renderer","render","isFn","flags","willRerender","isW10NOOP","preserve","componentsContext","parentComponentDef","globalContext","result","len","event","i"],"mappings":"mHAGA,IAAIA,EAAaC,EACbC,EAAoBC,EACpBC,EAAuBF,EAAkB,GACzCG,EAAeC,EACfC,EAAUC,EAA4B,KACtCC,EAAsB,UAAY,CACpC,OAAOF,CACT,EAEIG,EAAgC,EAEhCC,EAAY,OAAO,SAAa,IAKpCC,EAAiB,SACjBC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACA,CACE,GAAIP,EAAK,CACHA,EAAI,UACNA,EAAMA,EAAI,SAGZ,IAAIQ,EAAQP,GAAYA,IACpBQ,EAAYJ,GAAgBA,EAAa,GAC7C,GAAI,OAAOL,GAAQ,SACbE,GACFH,EAAI,IACFC,EACAQ,EACAF,EACAD,EACAK,EAAUL,EAAcE,EAAcH,CAAK,CACrD,EACQF,EAAWH,CAAG,EACdA,EAAI,IAAG,GAEPA,EAAI,IACFC,EACAQ,EACAF,EACAD,EACAK,EAAUL,EAAcE,EAAcH,CAAK,CACrD,MAEW,CACDI,GAAS,KACXA,EAAQ,CAAE,WAAYN,GACb,OAAOM,GAAU,WAC1BA,EAAQG,EAAiBH,CAAK,EAC1BN,IACFM,EAAM,WAAaN,IAIvB,IAAIU,EACJZ,EAAI,IACJA,EAAI,SAAWA,EAAI,SAAS,UAAYA,EAAI,SAAWA,EAAI,QAW3D,GAAIY,EACFb,EAAI,EAAEM,EAAcC,EAAKC,CAAY,EACrCK,EAASJ,EAAOT,CAAG,EACnBA,EAAI,IAAM,SACL,CACL,IAAIc,EAASb,GAAOA,EAAI,YAAcA,EAClCc,EAAO,OAAOD,GAAW,WAU7B,GAAIC,EAAM,CACR,IAAIC,EAAQV,EAAeA,EAAa,GAAK,EACzCW,EAAeD,EAAQnB,EACvBqB,EAAYJ,IAAWpB,EACvByB,EAAWrB,EAAYmB,EAAeC,EAE1C,GADAlB,EAAI,GAAGO,EAAKG,EAAWS,CAAQ,EAC3B,CAACD,GAAaH,EAAM,CACtB,IAAIK,EAAoB7B,EAAqBS,CAAG,EAC5CqB,EAAqBD,EAAkB,GACvCE,EAAgBF,EAAkB,GACtCA,EAAkB,GAAK,IAAI5B,EACzBkB,EACAW,EAAmB,GAAK,IAAMA,EAAmB,IAAId,CAAG,EACxDe,CACd,EACYR,EAAO,OAASlB,EAEZQ,EACFU,EAAO,MAAM,KAAM,CAACd,CAAG,EAAE,OAAOI,EAAMK,CAAK,CAAC,EAE5CK,EAAOd,EAAKS,CAAK,EAGnBW,EAAkB,GAAKC,CACxB,CACDrB,EAAI,GAAE,CAChB,MACUA,EAAI,MAAM,2BAA2B,CAExC,CACF,CACF,MAAUG,IACTH,EAAI,GACFO,EACAG,EACAZ,GACAQ,GACAA,EAAa,GAAKT,CACxB,EACIM,EAAWH,CAAG,EACdA,EAAI,GAAE,EAEV,EAEA,SAASY,EAAiBH,EAAO,CAC/B,IAAIc,EAAS,CAAA,EAEb,QAAShB,KAAOE,EACdc,EAAOpC,EAAW,IAAIoB,CAAG,CAAC,EAAIE,EAAMF,CAAG,EAGzC,OAAOgB,CACT,CAEA,SAASZ,EAAUL,EAAcE,EAAcH,EAAO,CACpD,IAAImB,EAAMhB,EAAeA,EAAa,OAAS,EAE/C,GAAIgB,IAAQ,EACV,OAAOnB,EAMT,QAHIkB,EAASlB,GAAS,GAClBoB,EAEKC,EAAIF,EAAKE,KAChBD,EAAQjB,EAAakB,CAAC,EACtBH,EAAO,KAAOE,EAAM,CAAC,CAAC,EAAInB,EAAa,EACrCmB,EAAM,CAAC,EACPA,EAAM,CAAC,EACPA,EAAM,CAAC,EACPA,EAAM,CAAC,CACb,EAGE,OAAOF,CACT","x_google_ignoreList":[0]}