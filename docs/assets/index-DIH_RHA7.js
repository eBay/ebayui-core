import{t as U,r as j,b as z,d as J,p as Q,e as c,c as V}from"./registry-CtNeIPU8.js";/* empty css               */import{_ as o}from"./dynamic-tag-HMZVE1pc.js";import{_ as W}from"./index-DN2d98YU.js";import{_ as I}from"./render-tag-mtfFSHEK.js";import{i as X,r as Y}from"./attr-tag-DphMQldM.js";import{_ as Z}from"./of-fallback-C2gEBeKK.js";import{_ as D}from"./index-BYUuD_wd.js";import{s as ee}from"./index-DXTRRJTV.js";import{a as ae}from"./index-eGtaP7gF.js";class le extends Marko.Component{handleExpand(){this.getComponent("options").elementScroll(),this.emit("expand")}handleCollapse(){this.getEl("button").focus(),this.emit("collapse")}handleListboxChange(e){this.input.collapseOnSelect&&(this._expander.expanded=!1);const l=e.index;this.state.selectedIndex=l,this.emit("change",e)}handleListboxEscape(){this._expander.expanded=!1}onCreate(){this.state={selectedIndex:-1}}onInput(e){const{state:l}=this;e.options=e.options||[],l.selectedIndex=Math.max(-1,e.options.findIndex(a=>a.selected)),e.collapseOnSelect=e.collapseOnSelect!==!1}onMount(){this._setupMakeup()}onUpdate(){this._setupMakeup()}onRender(){typeof window<"u"&&this._cleanupMakeup()}onDestroy(){this._cleanupMakeup()}_setupMakeup(){const{input:e}=this;if(e.options.length&&!e.disabled){const l=this.getEl("container");this._expander=new ee(l,{alwaysDoFocusManagement:!0,autoCollapse:!0,expandOnClick:!0,simulateSpacebarClick:!0,contentSelector:".listbox-button__listbox",hostSelector:".listbox-button__control",expandedClass:"listbox-button--expanded",focusManagement:"content"}),ae(this.getEl("button"))}}_cleanupMakeup(){this._expander&&(this._expander.destroy(),this._expander=void 0)}}const x="GDvMqdKc",r=U(x);j.r(x,()=>r);const v=le;r._=z(function(_,e,l,a,M,te){const{name:S,class:E,borderless:$,disabled:L,fluid:u,invalid:T,buttonName:w,options:f,truncate:m,prefixLabel:h,prefixId:g,postfixLabel:k,unselectedText:O="-",floatingLabel:d,collapseOnSelect:se,listSelection:F,variant:N,hasError:q,split:y="none",a11yIconPrefixText:A,ariaDescribedby:B,...G}=_;var s=f[M.selectedIndex],n=s&&s.text,b=s&&s.icon,C=b&&s&&s.text,i=g&&a.getElId("label"),H=n||O,K=N==="form";function p(t,{alwaysDisplay:R}){b?(t.be("span",{id:i,class:"btn__text"},"1",a,null,1),o(t,b,null,null,null,null,l,"2"),t.ee()):(n||R)&&(t.be("span",{id:i,class:"btn__text"},"3",a,null,1),t.t(H,a),k&&(t.be("span",{class:"btn__postfix-label"},"4",a,null,1),t.t(` ${k}`,a),t.ee()),t.ee())}const P=m&&!u?"div":"span";e.be(P,J(Q(G),{class:c(["listbox-button",E,u&&"listbox-button--fluid",K&&"listbox-button--form",q&&"listbox-button--error"])}),"@container",a,null,4,{"onexpander-expand":l.d("expander-expand","handleExpand",!1),"onexpander-collapse":l.d("expander-collapse","handleCollapse",!1)}),e.be("button",{class:c(["listbox-button__control","btn",y!=="none"&&`btn--split-${y}`,$?"btn--borderless":"btn--form",m&&"btn--truncated",d&&"btn--floating-label"]),"aria-label":C&&`${A}: ${C}`,value:n,type:"button",disabled:L,name:w,"aria-haspopup":"listbox","aria-describedby":B,"aria-labelledby":i&&`${g} ${i}`,"aria-invalid":T&&"true"},"@button",a,null,0),e.be("span",{class:"btn__cell"},"5",a,null,1),d?(e.be("span",{class:c(["btn__floating-label","btn__floating-label--animate",!n&&"btn__floating-label--inline"])},"6",a,null,1),e.t(d,a),e.ee(),o(e,p,null,null,null,null,l,"7")):h?(e.be("span",{class:"btn__label"},"8",a,null,1),e.t(h,a),e.ee(),o(e,p,()=>({"always-display":!0}),null,null,null,l,"9")):o(e,p,()=>({"always-display":!0}),null,null,null,l,"10"),I(W,{},e,l,"11"),e.ee(),e.ee(),I(D,X(()=>{for(const t of Z(f||[]))Y("options",{...t,selected:s===t})},{class:"listbox-button__listbox",name:S,tabindex:-1,listSelection:F}),e,l,"@options",[["change","handleListboxChange",!1],["escape","handleListboxEscape",!1]]),e.ee()},{t:x},v);r.Component=V(v,r._);export{r as _};
