var f=new WeakMap,u=new WeakMap;function v(n,e){const s=n.storyFn(),a=(s==null?void 0:s.component)||n.storyContext.component;m(a,n);const p={},c={};for(const r in s.input){const o=s.input[r],i=typeof o=="function"&&l(r);i?c[i]=o:p[r]=o}let t=f.get(e);if(t&&(n.forceRemount||!t.state)&&(t=void 0,d(e)),t){const r=u.get(t);t.input=p,t.update();for(const o in r){const i=r[o];c[o]!==i&&(delete r[o],t.removeListener(o,i))}for(const o in c){const i=c[o];r[o]!==i&&(r[o]=i,t.on(o,i))}}else{t=a.renderSync(p).replaceChildrenOf(e).getComponent(),f.set(e,t);for(const r in c)t.on(r,c[r])}return u.set(t,c),n.showMain(),()=>d(e)}var y=(n,e)=>{const{component:s}=e;return m(s,e),{component:s,input:n}};function m(n,e){if(!n||!n.renderSync)throw new Error(`Expected a component to be specified in the story: "${e.title} > ${e.name}".`)}function l(n){const e=/^on(-)?(.*)$/.exec(n);if(e){const[,s,a]=e;return s?a:a.charAt(0).toLowerCase()+a.slice(1)}return!1}function d(n){const e=f.get(n);e&&(e.destroy(),n.innerHTML="",f.delete(n),u.delete(e))}var h={renderer:"marko"};export{h as parameters,y as render,v as renderToCanvas};
