import{r as le,a as re,d as oe,t as ae,c as p,m as ce,p as F}from"./merge-attrs.9e0d7be9.js";/* empty css                    */import{d as u}from"./dynamic-tag.70156c9d.js";import{_ as de}from"./index.a5276c99.js";import{r as N}from"./render-tag.1a0b986f.js";import{_ as O}from"./index.f495492d.js";import"./preserve-attrs.c8bb8439.js";import{s as ue}from"./index.8e5d5614.js";import{r as j,h as fe}from"./index.cfa4da37.js";let a,h,w,T,P,A,B,z,X;function he(){const e=document.createElement("div");return e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex","0"),e.className="keyboard-trap-boundary",e}function L(){z.focus()}function H(){X.focus()}function me(){h=he(),w=h.cloneNode(),T=h.cloneNode(),P=h.cloneNode(),A=h.cloneNode(),B=h.cloneNode(),h.addEventListener("focus",L),w.addEventListener("focus",L),T.addEventListener("focus",H),P.addEventListener("focus",L),A.addEventListener("focus",H),B.addEventListener("focus",H)}function Y(){return a&&(h=b(h),w=b(w),T=b(T),P=b(P),A=b(A),B=b(B),a.classList.remove("keyboard-trap--active"),a.dispatchEvent(new CustomEvent("keyboardUntrap",{bubbles:!0})),a=null),a}function b(e){const i=e.parentNode;return i?i.removeChild(e):e}function ge(e){h?Y():me(),a=e;const i=typeof document>"u"?null:document.body,t=ue(a,!0);return z=t[0],X=t[t.length-1],i.insertBefore(h,i.childNodes[0]),a.parentNode.insertBefore(w,a),a.insertBefore(T,a.childNodes[0]),a.appendChild(P),a.parentNode.insertBefore(A,a.nextElementSibling),i.appendChild(B),a.dispatchEvent(new CustomEvent("keyboardTrap",{bubbles:!0})),a.classList.add("keyboard-trap--active"),a}const pe=e=>e.nodeType===1&&e.tagName.toLowerCase()!=="body"&&e.tagName.toLowerCase()!=="html",be=e=>e.nodeType===1&&e.tagName.toLowerCase()!=="script",ye=(e,i)=>e.concat(i);function Z(e,i=[]){const t=e.previousSibling;return t?(i.push(t),Z(t,i)):i}function G(e,i=[]){const t=e.nextSibling;return t?(i.push(t),G(t,i)):i}function J(e){return Z(e).concat(G(e)).filter(be)}function Q(e,i=[]){const t=e.parentNode;return t?(i.push(t),Q(t,i)):i}function W(e){return Q(e).filter(pe)}function Ee(e){return W(e).map(i=>J(i)).reduce(ye,[])}let E,m,C;const R=e=>e.tagName.toLowerCase()!=="svg";function M(e,i){let t;return i===!1?t=S(e,"aria-hidden","false"):t=S(e,"hidden",!1),t}function K(e,i){let t;return i===!1?t=S(e,"aria-hidden","true"):t=S(e,"hidden",!0),t}function S(e,i,t){const n=typeof t=="boolean";return{el:e,attributeName:i,cleanValue:n?e[i]:e.getAttribute(i),dirtyValue:t,isProperty:n}}function ve(e){e.isProperty===!0?e.el[e.attributeName]=e.dirtyValue:e.el.setAttribute(e.attributeName,e.dirtyValue)}function we(e){e.cleanValue?e.isProperty===!0?e.el[e.attributeName]=e.cleanValue:e.el.setAttribute(e.attributeName,e.cleanValue):e.el.removeAttribute(e.attributeName)}function D(){m&&(C.forEach(e=>we(e)),C=[],E&&E.setAttribute("role","main"),m.dispatchEvent(new CustomEvent("screenreaderUntrap",{bubbles:!0})),m=null)}const Te={useHiddenProperty:!1};function Pe(e,i){D();const t=Object.assign({},Te,i);m=e,E=document.querySelector('main, [role="main"]'),E&&E.setAttribute("role","presentation");const n=W(m);let r=J(m),d=Ee(m);t.useHiddenProperty===!0&&(r=r.filter(R),d=d.filter(R)),C=[M(m,t.useHiddenProperty)].concat(n.map(l=>M(l,t.useHiddenProperty))).concat(r.map(l=>K(l,t.useHiddenProperty))).concat(d.map(l=>K(l,t.useHiddenProperty))),C.forEach(l=>ve(l)),m.dispatchEvent(new CustomEvent("screenreaderTrap",{bubbles:!0}))}let ee,v,k=!1;function te(){if(!k){const{body:e}=document,{pageXOffset:i,pageYOffset:t}=window,{width:n,height:r,marginTop:d,marginLeft:l}=getComputedStyle(e);let o="position:fixed;overflow:hidden;";ee=[i,t],v=e.getAttribute("style"),o+=`height:${r};`,o+=`width:${n};`,t&&(o+=`margin-top:${-1*(t-parseInt(d,10))}px;`),i&&(o+=`margin-left:${-1*(i-parseInt(l,10))}px`),v&&(o=`${v};${o}`),e.setAttribute("style",o),j.addEventListener("",ne),k=!0}}function ie(){if(k){const{body:e}=document;v?e.setAttribute("style",v):e.removeAttribute("style"),window.scrollTo(...ee),j.removeEventListener("",ne),k=!1}}function ne(){ie(),te()}const $="transitionend",V=({el:e,className:i,waitFor:t},n)=>{let r,d=0;const l=t?t.length:0,o=e.classList,c=`${i}-init`;if(!("ontransitionend"in e)){const f=setTimeout(n,0);return()=>clearTimeout(f)}let g=Ae(()=>{g=void 0,o.add(i),o.remove(c),l?t.forEach(f=>f.addEventListener($,s)):(y(),n&&n())});return o.add(c),y;function y(){if(!r){r=!0;for(let f=d;f<l;f++)t[f].removeEventListener($,s);g?(g(),o.remove(c)):o.remove(i)}}function s({target:f}){f.removeEventListener($,s),++d===l&&(r=!0,o.remove(i),n&&n())}};function Ae(e){let i,t;return window.requestAnimationFrame?(i=requestAnimationFrame(()=>{i=requestAnimationFrame(e)}),t=cancelAnimationFrame):(i=setTimeout(e,26),t=clearTimeout),()=>{i&&(t(i),i=void 0)}}const Be={get useHiddenProperty(){return this.input.useHiddenProperty||!1},trackLastClick(e){if(e.defaultPrevented||e.metaKey||e.ctrlKey||e.shiftKey||e.button!==0)return;let i=e.target;for(;i!==null&&i.nodeName!=="BUTTON";)i=i.parentNode;this.clickTarget=i},getActiveElement(e){let i;e&&e.closeFocus&&(i=document.getElementById(e.closeFocus));const t=document.activeElement===document.body?this.clickTarget:document.activeElement;return i||t},handleStartClick({target:e}){this.startEl=e},handleScroll(){this.emit("scroll")},handleKeydown(e){fe(e,()=>{this.state.open=!1})},handleDialogClick({target:e,clientY:i}){const{closeEl:t,windowEl:n,startEl:r}=this;if(this.startEl=null,this.input.buttonPosition!=="hidden"&&!n.contains(r)){if(!t.contains(e)&&n.contains(e)){const{bottom:d}=n.getBoundingClientRect(),{paddingBottom:l}=getComputedStyle(n),o=d-parseInt(l,10);if(i<o)return}this.state.open=!1}},handleCloseButtonClick(){this.state.open=!1},onInput(e){e.isModal=e.isModal!==!1,this.isAnimating||(this.state={open:e.open||!1})},onRender(){typeof window<"u"&&this._release()},onMount(){this.rootEl=this.getEl(),this.windowEl=this.getEl("window"),this.closeEl=this.getEl("close"),this.bodyEl=this.getEl("body"),this.input.transitionEl==="root"?this.transitionEls=[this.rootEl]:this.input.transitionEl==="window"?this.transitionEls=[this.windowEl]:this.transitionEls=[this.windowEl,this.rootEl],this.subscribeTo(this.rootEl).on("click",()=>{}),this._trap({firstRender:!0})},onUpdate(){this._trap({firstRender:!1})},_triggerFocus(e){this.input.isModal&&e&&e.focus()},_triggerBodyScroll(e){this.input.isModal&&(e?te():ie())},onDestroy(){this._cancelAsync(),this._release(),this.isTrapped&&this._triggerBodyScroll(!1)},_getTrapCallback(e,i,t){const n=this.input.isModal&&(e||i&&!t),r=this.useHiddenProperty;return()=>{n&&(Pe(this.el,{useHiddenProperty:r}),r||ge(this.windowEl))}},_trap(e){const{isTrapped:i,restoreTrap:t}=this,n=this.isTrapped=this.state.open,r=e&&e.firstRender,d=n!==i,l=this.input.focus&&document.getElementById(this.input.focus)||this.closeEl,o=this._getTrapCallback(t,n,i);if(r&&this.input.isModal&&n&&(this._prevFocusEl=this.getActiveElement(this.input),this._triggerFocus(l),this._triggerBodyScroll(!0)),d){this._cancelAsync();const c=()=>{if(this.cancelTransition=void 0,o(),n)this.rootEl.removeAttribute("hidden"),this._triggerFocus(l),this.emit("open"),this.isAnimating=!1;else{this._triggerBodyScroll(!1);const g=this.getActiveElement();this.rootEl.setAttribute("hidden",""),this.emit("close"),this.isAnimating=!1,g===this.getActiveElement()&&document.documentElement.contains(this._prevFocusEl)&&this._prevFocusEl.focus(),this.cancelScrollReset=setTimeout(()=>{this.rootEl.parentNode.replaceChild(this.rootEl,this.rootEl),this.cancelScrollReset=void 0},20)}};n?r?(this.isAnimating=!1,this.rootEl.removeAttribute("hidden"),o()):(this._prevFocusEl=this.getActiveElement(this.input),this._triggerBodyScroll(!0),this.isAnimating=!0,this.cancelTransition=V({el:this.rootEl,className:`${this.input.classPrefix}--show`,waitFor:this.transitionEls},c)):r?(this.isAnimating=!1,this.rootEl.setAttribute("hidden","")):(this.isAnimating=!0,this.cancelTransition=V({el:this.rootEl,className:`${this.input.classPrefix}--hide`,waitFor:this.transitionEls},c))}else t&&o()},_release(){this.isTrapped&&this.input.isModal?(this.restoreTrap=this.state.open,D(this.el),this.useHiddenProperty||Y(this.windowEl)):this.restoreTrap=!1},_cancelAsync(){this.cancelScrollReset&&(clearTimeout(this.cancelScrollReset),this.cancelScrollReset=void 0),this.cancelTransition&&(this.cancelTransition(),this.cancelTransition=void 0)}};function U(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function _(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?U(Object(t),!0).forEach(function(n){_e(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function _e(e,i,t){return i=Ce(i),i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}function Ce(e){var i=Se(e,"string");return typeof i=="symbol"?i:String(i)}function Se(e,i){if(typeof e!="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,i||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}const I="ZSiMe4+1",x=ae(I),q=typeof window<"u";var ke=["open","type","classPrefix","focus","closeFocus","a11yCloseText","windowClass","baseEl","header","footer","transitionEl","isModal","closeButton","closeButtonClass","closeButtonText","ignoreEscape","slideFrom","windowType","mainId","ariaLabelledby","buttonPosition","useHiddenProperty","position","variant","confirmText","rejectText","noHandle","top","action"],xe=["id","as","class"],Fe=["id","class","a11yText"];le.exports.r(I,()=>x);const se=Be;x._=re(function(e,i,t,n,r,d){var l=e.buttonPosition||"right",o=e.baseEl||"div",c=e.header;function g(s){u(s,c.as||"h2",()=>_(_({class:[c.class,"".concat(e.classPrefix,"__title")]},F(c,xe)),{},{id:c.id||n.getElId("dialog-title")}),f=>{u(f,c.renderBody,null,null,null,null,t,"2")},null,null,t,"1")}function y(s){l!=="hidden"&&(s.be("button",{class:p([e.closeButtonText?"fake-link":"icon-btn",e.closeButtonClass,"".concat(e.classPrefix,"__close")]),type:"button","aria-label":e.a11yCloseText},"@close",n,null,0,{onclick:t.d("click","handleCloseButtonClick",!1)}),e.closeButtonText?s.t(e.closeButtonText,n):e.closeButton?u(s,e.closeButton,null,null,null,null,t,"4"):N(de,{},s,t,"5"),s.ee())}u(i,o,()=>_(_({},F(e,ke)),{},{"aria-labelledby":e.ariaLabelledby||e.header&&n.getElId("dialog-title"),"aria-modal":"true",role:e.role||"dialog",class:[e.classPrefix,e.class],hidden:!r.open,"aria-live":!e.isModal&&"polite"}),s=>{r.open&&q&&!e.ignoreEscape&&N(O,{to:typeof window=="object"&&document,__events:["on","keydown"]},s,t,"7",[["keydown","handleKeydown",!1]]),!r.open&&q&&N(O,{to:typeof window=="object"&&window,__events:["on","click"]},s,t,"8",[["click","trackLastClick",!1]]),s.be("div",{class:p([e.windowType?"".concat(e.classPrefix,"__").concat(e.windowType,"-window"):"".concat(e.classPrefix,"__window"),e.windowClass])},"@window",n,null,1,{onmouseenter:t.d("mouseenter","emit",!1,["mouseEnter"]),onmouseleave:t.d("mouseleave","emit",!1,["mouseLeave"])}),e.top&&u(s,e.top.renderBody,null,null,null,null,t,"9"),s.be("div",{class:p("".concat(e.classPrefix,"__header"))},"10",n,null,1),e.prevButton&&(s.be("button",ce(F(e.prevButton,Fe),{class:p(["icon-btn","lightbox-dialog__prev",e.prevButton.class]),type:"button","aria-label":e.prevButton.a11yText}),"11",n,null,4,{onclick:t.d("click","emit",!1,["prevButtonClick"])}),u(s,e.prevButton,null,null,null,null,t,"12"),s.ee()),c&&l==="right"&&u(s,g,null,null,null,null,t,"13"),l!=="bottom"&&u(s,y,null,null,null,null,t,"14"),c&&(l==="left"||l==="hidden")&&u(s,g,null,null,null,null,t,"15"),s.ee(),s.be("div",{id:e.mainId,class:p("".concat(e.classPrefix,"__main"))},"@body",n,null,1,{onscroll:t.d("scroll","handleScroll",!1)}),u(s,e.renderBody,null,null,null,null,t,"16"),s.ee(),e.action&&(s.be("span",{class:p("".concat(e.classPrefix,"__actions"))},"17",n,null,1),u(s,e.action&&e.action.renderBody,null,null,null,null,t,"18"),s.ee()),(e.footer||l==="bottom")&&(s.be("div",{class:p("".concat(e.classPrefix,"__footer"))},"19",n,null,1),u(s,e.footer&&e.footer.renderBody,null,null,null,null,t,"20"),l==="bottom"&&u(s,y,null,null,null,null,t,"21"),s.ee()),s.ee()},null,{pa:["hidden"]},t,"6",[["click","handleDialogClick",!1],["mousedown","handleStartClick",!1]])},{t:I},se);x.Component=oe(se,x._);export{x as _};
//# sourceMappingURL=index.1bc8b97e.js.map
