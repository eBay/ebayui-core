{"version":3,"file":"index-568ef998.js","sources":["../../src/components/ebay-drawer-dialog/component.js","../../src/components/ebay-drawer-dialog/index.marko"],"sourcesContent":["export default {\n    setExpandedState(isExpanded) {\n        if (isExpanded !== this.state.expanded) {\n            this.state.expanded = isExpanded;\n            if (isExpanded) {\n                this.emit(\"expanded\");\n            } else {\n                this.emit(\"collapsed\");\n            }\n        }\n    },\n\n    handleExpand() {\n        this.setExpandedState(!this.state.expanded);\n    },\n\n    handleScroll() {\n        this.setExpandedState(true);\n    },\n\n    handleTouchStart(event) {\n        const touches = event.changedTouches;\n        this.touches = [];\n        // Sometimes there can be multiple touches on an object.\n        // This saves the current touches when the user begins to tap on the handle\n        for (let i = 0; i < touches.length; i++) {\n            const { identifier, pageY } = touches[i];\n            this.touches.push({\n                identifier,\n                pageY,\n            });\n        }\n    },\n\n    handleTouchMove(event) {\n        // This will verify that a given touch moved about 30px up/down from the handle\n        // If so, then it will either expand or collapse the drawer.\n        // It uses all the saved touch start events\n        if (this.touches.length) {\n            for (let i = 0; i < event.changedTouches.length; i++) {\n                const current = event.changedTouches[i];\n                const compare = this.touches.findIndex(\n                    (item) => item.identifier === current.identifier\n                );\n                const diff = current.pageY - this.touches[compare].pageY;\n\n                if (diff > 30) {\n                    // Drag down, collpase\n                    if (this.state.expanded) {\n                        this.setExpandedState(false);\n                    } else {\n                        this.getComponent(\"dialog\").state.open = false;\n                    }\n                    this.handleTouchEnd(event);\n                } else if (diff < -30) {\n                    this.setExpandedState(true);\n                    this.handleTouchEnd(event);\n                }\n            }\n        }\n    },\n\n    handleTouchEnd(event) {\n        // Remove all matching touches from the list when the touch is over.\n        // This is done this way in case a finger is lifted up before another finger\n        for (let i = 0; i < event.changedTouches.length; i++) {\n            const current = event.changedTouches[i];\n            const idx = this.touches.findIndex(\n                (item) => item.identifier === current.identifier\n            );\n            if (idx > -1) {\n                this.touches.splice(idx, 1);\n            }\n        }\n    },\n\n    onMount() {\n        this.touches = [];\n    },\n\n    onInput(input) {\n        this.state = { expanded: input.expanded || false };\n    },\n};\n","$ var handleLabel = (!state.expanded ?\n    (input.a11yMaximizeText || \"Maximize Drawer\") :\n    (input.a11yMinimizeText || \"Minimize Drawer\"));\n\n<ebay-dialog-base\n    ...input\n    open=input.open\n    classPrefix=\"drawer-dialog\"\n    key=\"dialog\"\n    on-scroll('handleScroll')\n    on-open(\"emit\", \"open\")\n    on-close(\"emit\", \"close\")\n    class=[\n        input.class,\n        \"drawer-dialog--mask-fade-slow\"\n    ]\n    window-class=[\n            `drawer-dialog__window`,\n            \"drawer-dialog__window--slide\",\n            state.expanded && \"drawer-dialog__window--expanded\"\n        ]>\n        <if (!input.noHandle)>\n            <@top>\n                <button\n                    aria-label=handleLabel\n                    type=\"button\"\n                    class=`drawer-dialog__handle`\n                    onClick(\"handleExpand\")\n                    onTouchStart(\"handleTouchStart\")\n                    onTouchMove(\"handleTouchMove\")\n                    onTouchEnd(\"handleTouchEnd\")\n                    onTouchCancel(\"handleTouchEnd\")\n                ></button>\n            </@top>\n        </if>\n\n    <${input.renderBody}/>\n</ebay-dialog-base>\n"],"names":["_marko_component","isExpanded","event","touches","i","identifier","pageY","current","compare","item","diff","idx","input","handleLabel","state","expanded","a11yMinimizeText","a11yMaximizeText","_top","noHandle","_marko_repeatable","out","e","_component","_componentDef","d","Symbol","iterator","_marko_self_iterator","_marko_tag","_ebayDialogBase","_objectSpread","open","class","_marko_dynamic_tag","renderBody","t","_marko_componentType","_marko_component2","_marko_template","Component","_marko_defineComponent","_"],"mappings":"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"}