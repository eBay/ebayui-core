{"version":3,"file":"filter-menu-button.stories-49161b0e.js","sources":["../../src/components/ebay-filter-menu-button/README.md","../../src/components/ebay-filter-menu-button/component.js","../../src/components/ebay-filter-menu-button/index.marko"],"sourcesContent":["export default \"<h1 style='display: flex; justify-content: space-between; align-items: center;'>\\n    <span>\\n        ebay-filter-menu-button\\n    </span>\\n    <span style='font-weight: normal; font-size: medium; margin-bottom: -15px;'>\\n        DS v1.1.0\\n    </span>\\n</h1>\\n\\n## Examples and Documentation\\n\\n-   [Storybook](https://ebay.github.io/ebayui-core/?path=/story/buttons-ebay-filter-menu-button)\\n-   [Storybook Docs](https://ebay.github.io/ebayui-core/?path=/docs/buttons-ebay-filter-menu-button)\\n-   [Code Examples](https://github.com/eBay/ebayui-core/tree/master/src/components/ebay-filter-menu-button/examples)\\n\"","import Expander from \"makeup-expander\";\nimport * as eventUtils from \"../../common/event-utils\";\nimport menuUtils from \"../../common/menu-utils\";\n\nexport default Object.assign({}, menuUtils, {\n    handleMenuKeydown({ originalEvent }) {\n        eventUtils.handleEscapeKeydown(\n            originalEvent,\n            () => (this._expander.expanded = false)\n        );\n    },\n\n    handleMenuChange({\n        checkedIndex,\n        el,\n        originalEvent,\n        index,\n        currentChecked,\n    }) {\n        // TODO: the event data from the filter-menu should probably\n        // change to include which items are checked not just the values.\n        this.toggleChecked(checkedIndex);\n        this._emitComponentEvent(\"change\", originalEvent, {\n            el,\n            index,\n            currentChecked,\n        });\n    },\n\n    handleFooterButtonClick() {\n        this._emitComponentEvent(\"footer-click\");\n        this._expander.expanded = false;\n    },\n\n    handleFormSubmit({ originalEvent }) {\n        this._emitComponentEvent(\"form-submit\", originalEvent);\n    },\n\n    handleExpand({ originalEvent }) {\n        this._emitComponentEvent(\"expand\", originalEvent);\n    },\n\n    handleCollapse({ originalEvent }) {\n        this.getEl(\"button\").focus();\n        this._emitComponentEvent(\"collapse\", originalEvent);\n    },\n\n    onInput(input) {\n        input.items = input.items || [];\n        this.state = this.getInputState(input);\n    },\n\n    onMount() {\n        this._setupMakeup();\n    },\n\n    onUpdate() {\n        this._setupMakeup();\n    },\n\n    onRender() {\n        if (typeof window !== \"undefined\") {\n            this._cleanupMakeup();\n        }\n    },\n\n    onDestroy() {\n        this._cleanupMakeup();\n    },\n\n    _emitComponentEvent(eventType, originalEvent, args) {\n        const { el, index, currentChecked } = args || {};\n        switch (eventType) {\n            case \"expand\":\n                this.emit(eventType);\n                break;\n            case \"change\":\n            case \"collapse\":\n            case \"form-submit\":\n            case \"footer-click\": {\n                const checked = this.getCheckedValues();\n                this.emit(eventType, {\n                    el,\n                    checked,\n                    originalEvent,\n                    index,\n                    currentChecked,\n                });\n                break;\n            }\n            default:\n                break;\n        }\n    },\n\n    _setupMakeup() {\n        this._expander = new Expander(this.getEl(\"container\"), {\n            hostSelector: \".filter-menu-button__button\",\n            contentSelector: \".filter-menu-button__menu\",\n            focusManagement: \"interactive\",\n            expandOnClick: true,\n            autoCollapse: true,\n            alwaysDoFocusManagement: true,\n        });\n    },\n\n    _cleanupMakeup() {\n        if (this._expander) {\n            this._expander.destroy();\n            this._expander = undefined;\n        }\n    },\n});\n","import { processHtmlAttributes } from \"../../common/html-attributes\"\n\nstatic var ignoredAttributes = [\n    \"variant\",\n    \"text\",\n    \"footer\",\n    \"footerText\",\n    \"disabled\",\n    \"selected\",\n    \"formName\",\n    \"formAction\",\n    \"formMethod\",\n    \"items\",\n    \"type\"\n];\n$ var footer = input.footer || {};\n\n<span\n    ...processHtmlAttributes(input, ignoredAttributes)\n    key=\"container\"\n    class=[\"filter-menu-button\", input.class]\n    onExpander-expand(\"handleExpand\")\n    onExpander-collapse(\"handleCollapse\")>\n    <button\n        key=\"button\"\n        type=\"button\"\n        class=\"filter-menu-button__button\"\n        disabled=input.disabled\n        aria-expanded:no-update=\"false\"\n        aria-haspopup=\"true\"\n        aria-label=input.a11yText\n        aria-pressed=(component.getCheckedValues().some(Boolean) && \"true\")>\n        <span class=\"filter-menu-button__button-cell\">\n            <span class=\"filter-menu-button__button-text\">${input.text}</span>\n            <ebay-chevron-down-12-icon/>\n        </span>\n    </button>\n    <ebay-filter-menu\n        class-prefix=\"filter-menu-button\"\n        variant=input.variant\n        type=input.type\n        form-name=input.formName\n        form-action=input.formAction\n        form-method=input.formMethod\n        footer-text=input.footerText\n        a11y-footer-text=input.a11yFooterText\n        on-keydown(\"handleMenuKeydown\")\n        on-change(\"handleMenuChange\")\n        on-form-submit(\"handleFormSubmit\")\n        on-footer-click(\"handleFooterButtonClick\")>\n        <for|item, i| of=(input.items || [])>\n            <@item ...item checked=component.isChecked(i)/>\n        </for>\n        <if(input.footerText || input.footer)>\n            <@footer ...footer a11y-footer-text=(input.a11yFooterText || (input.footer && input.footer.a11yFooterText))>\n                <if(input.footerText)>\n                    ${input.footerText}\n                </if>\n                <else>\n                    <${input.footer.renderBody}/>\n                </else>\n\n            </@footer>\n        </if>\n    </ebay-filter-menu>\n</span>\n"],"names":["Readme","_marko_component","menuUtils","originalEvent","eventUtils.handleEscapeKeydown","checkedIndex","el","index","currentChecked","input","eventType","args","checked","Expander","ignoredAttributes","_marko_registerComponent","_marko_componentType","_marko_template","_marko_component2","_","_marko_renderer","out","_componentDef","_component","state","$global","footer","be","_marko_merge_attrs","processHtmlAttributes","_marko_class_merge","class","d","disabled","a11yText","getCheckedValues","some","Boolean","pa","t","text","ee","_marko_tag","_ebayChevronDown12Icon","_footer","_items","_i","item","items","i","push","_objectSpread","isChecked","Symbol","iterator","_marko_self_iterator","footerText","_marko_repeatable","a11yFooterText","_marko_dynamic_tag","renderBody","_ebayFilterMenu","variant","type","formName","formAction","formMethod","Component","_marko_defineComponent"],"mappings":"m/BAAA,MAAeA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;ECIf,MAAAC,EAAe,OAAO,OAAO,CAAE,EAAEC,EAAW,CACxC,kBAAkB,CAAE,cAAAC,GAAiB,CACjCC,EACID,EACA,IAAO,KAAK,UAAU,SAAW,EAC7C,CACK,EAED,iBAAiB,CACb,aAAAE,EACA,GAAAC,EACA,cAAAH,EACA,MAAAI,EACA,eAAAC,CACR,EAAO,CAGC,KAAK,cAAcH,CAAY,EAC/B,KAAK,oBAAoB,SAAUF,EAAe,CAC9C,GAAAG,EACA,MAAAC,EACA,eAAAC,CACZ,CAAS,CACJ,EAED,yBAA0B,CACtB,KAAK,oBAAoB,cAAc,EACvC,KAAK,UAAU,SAAW,EAC7B,EAED,iBAAiB,CAAE,cAAAL,GAAiB,CAChC,KAAK,oBAAoB,cAAeA,CAAa,CACxD,EAED,aAAa,CAAE,cAAAA,GAAiB,CAC5B,KAAK,oBAAoB,SAAUA,CAAa,CACnD,EAED,eAAe,CAAE,cAAAA,GAAiB,CAC9B,KAAK,MAAM,QAAQ,EAAE,MAAK,EAC1B,KAAK,oBAAoB,WAAYA,CAAa,CACrD,EAED,QAAQM,EAAO,CACXA,EAAM,MAAQA,EAAM,OAAS,CAAA,EAC7B,KAAK,MAAQ,KAAK,cAAcA,CAAK,CACxC,EAED,SAAU,CACN,KAAK,aAAY,CACpB,EAED,UAAW,CACP,KAAK,aAAY,CACpB,EAED,UAAW,CACH,OAAO,OAAW,KAClB,KAAK,eAAc,CAE1B,EAED,WAAY,CACR,KAAK,eAAc,CACtB,EAED,oBAAoBC,EAAWP,EAAeQ,EAAM,CAChD,KAAM,CAAE,GAAAL,EAAI,MAAAC,EAAO,eAAAC,CAAc,EAAKG,GAAQ,CAAA,EAC9C,OAAQD,EAAS,CACb,IAAK,SACD,KAAK,KAAKA,CAAS,EACnB,MACJ,IAAK,SACL,IAAK,WACL,IAAK,cACL,IAAK,eAAgB,CACjB,MAAME,EAAU,KAAK,mBACrB,KAAK,KAAKF,EAAW,CACjB,GAAAJ,EACA,QAAAM,EACA,cAAAT,EACA,MAAAI,EACA,eAAAC,CACpB,CAAiB,EACD,KACH,CAGJ,CACJ,EAED,cAAe,CACX,KAAK,UAAY,IAAIK,EAAS,KAAK,MAAM,WAAW,EAAG,CACnD,aAAc,8BACd,gBAAiB,4BACjB,gBAAiB,cACjB,cAAe,GACf,aAAc,GACd,wBAAyB,EACrC,CAAS,CACJ,EAED,gBAAiB,CACT,KAAK,YACL,KAAK,UAAU,UACf,KAAK,UAAY,OAExB,CACL,CAAC,0iCC9GM,IAAIC,EAAoB,CAC3B,UACA,OACA,SACA,aACA,WACA,WACA,WACA,aACA,aACA,QACA,MAAM,EACRC,EAAAA,EAAAC,EAAA,IAAAC,CAAA,EAAA,MAAAC,EAAAjB,EAAAgB,EAAAE,EAAAC,WAAAX,EAAAY,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,CACA,IAAIC,EAASjB,EAAMiB,QAAU,GAE9BL,EAAAM,GAAA,OAAIC,EACEC,EAAsBpB,EAAOK,CAAiB,EAAC,CAAA,MAE5CgB,EAAC,CAAA,qBAAsBrB,EAAMsB,KAAK,CAAA,CAAC,CAAA,EAAA,aAAAR,EAAA,KAAA,EAAA,CAAA,oBAAAD,EAAAU,EAAA,kBACvB,eAAc,EAAA,EAAA,sBAAAV,EAAAU,EAAA,oBACZ,iBAAgB,EAAA,CAAA,CAAA,EALnC,CAMAX,EAAAM,GAAM,SAAA,CAAA,KAAA,SAAA,MAAA,6BAAA,SAIMlB,EAAMwB,SAAQ,gBAAA,QAAA,gBAAA,OAAA,aAGZxB,EAAMyB,SAAQ,eACXX,EAAUY,iBAAgB,EAAGC,KAAKC,OAAO,GAAK,MAAM,EAAA,UAAAd,EAAA,KAAA,EAAA,CAAAe,GAAA,CAAA,eAAA,CAAA,CAAA,EACjEjB,EAAAM,GAAI,OAAA,CAAA,MAAA,iCAAA,EAAA,IAAAJ,EAAA,KAAA,CAAA,EACAF,EAAAM,GAAI,OAAA,CAAA,MAAA,iCAAA,EAAA,IAAAJ,EAAA,KAAA,CAAA,EAAyCF,EAAAkB,EAAE9B,EAAM+B,KAAIjB,CAAA,EAACF,EAAAoB,GAAA,EAC3DC,EAAAC,EAAAtB,CAAAA,EAAAA,EAAAC,EAAA,GAAA,EAA4BD,EAAAoB,GAAA,EAAApB,EAAAoB,GAAA,EAAA,IAAAG,EAAA,KAAA,MAAAC,EAAA,CAAA,EAAA,IAAAC,EAAA,EAAA,UAgB3BC,KAAatC,EAAMuC,OAAS,CAAA,EAAE,CAAA,IAAxBC,EAACH,IACRD,EAAAK,KAAAC,EAAAA,KAAUJ,CAAI,EAAA,GAAA,CAAA,QAASxB,EAAU6B,UAAUH,CAAC,EAAC,CAAAI,OAAAC,QAAA,EAAAC,CAAA,CAAA,CAAA,CAAE,EAE/C9C,EAAM+C,YAAc/C,EAAMiB,UAC1BkB,EAAAa,EAAAb,EAAAO,EAAAA,EAAA,GAAYzB,CAAM,EAAA,GAAA,CAAA,eAAmBjB,EAAMiD,gBAAmBjD,EAAMiB,QAAUjB,EAAMiB,OAAOgC,eAAe,WAAArC,GAAA,CAClGZ,EAAM+C,WACNnC,EAAAkB,EAAE9B,EAAM+C,WAAUjC,CAAA,EAGlBoC,EAAAtC,EAAGZ,EAAMiB,OAAOkC,WAAU,KAAA,KAAA,KAAA,KAAAtC,EAAA,GAAA,CAFzB,EAAA,CAAA+B,OAAAC,QAAA,EAAAC,CAAA,CAAA,CAAA,GApBjBb,EAAAmB,EAAA,CAAA,YACiB,qBAAoB,QACzBpD,EAAMqD,QAAO,KAChBrD,EAAMsD,KAAI,SACLtD,EAAMuD,SAAQ,WACZvD,EAAMwD,WAAU,WAChBxD,EAAMyD,WAAU,WAChBzD,EAAM+C,WAAU,eACX/C,EAAMiD,eAAc,MAAAb,EAAA,OAAAD,GAAAvB,EAAAC,EAC1B,IAAA,CAAA,CAAA,UAAA,kCACD,mBAAkB,EAAA,EAAA,CAAA,cACb,mBAAkB,EAAA,EAAA,CAAA,eACjB,0BAAyB,EAAA,CAAA,CAAA,CAe1B,CAAAD,EAAAoB,GAAA,CAAA,EAAA,CAAAF,EAAAvB,CAAA,EAAAE,CAAA,EAAAD,EAAAkD,UAAAC,EAAAlD,EAAAD,EAAAE,CAAA;;;;"}