import{t as N,r as q,b as G,e as J,p as Q,f as X,g as Y,d as Z}from"./registry-D0x2Lw0V.js";import{_ as D}from"./index-D-Xj9adi.js";import{_ as ee}from"./index-CrY4xSt-.js";/* empty css                    */import{_ as te}from"./index-CryLPOQl.js";import{_ as u}from"./render-tag-Buaq4gMc.js";import{_ as k}from"./dynamic-tag-BSuzyz1c.js";import{_ as ae}from"./index-CPUcvrin.js";import{i as se,r as ne}from"./attr-tag-W-ozfNNY.js";import{C as le}from"./index-uu7ORin4.js";import{s as ie}from"./index-D7B88Psz.js";import{a as re,h as oe}from"./index-blmbJU0z.js";import{M as de,s as pe}from"./index-DYoOQ_vw.js";class he extends de{onCreate(){pe(this)}toggleItemChecked(t,e,a){const n=this.isRadio()&&t!==this.state.checkedIndex;this.toggleChecked(t),n?(this.input.collapseOnSelect&&(this.expander.expanded=!1),this.emitComponentEvent({index:t,eventType:"change",el:e,originalEvent:a})):this.type!=="radio"&&(this.input.collapseOnSelect&&(this.expander.expanded=!1),this.emitComponentEvent({index:t,eventType:this.type?"change":"select",el:e,originalEvent:a}))}handleItemClick(t,e,a){this.toggleItemChecked(t,a,e)}handleMenuKeydown({el:t,originalEvent:e,index:a}){e!==void 0&&(re(e,()=>{this.handleItemClick(a??0,e,t)}),oe(e,()=>{this.expander.expanded=!1,this.focus()}))}focus(){this.getComponent("button").el.focus()}handleButtonEscape(){this.expander.expanded=!1}handleExpand(){this.input.disabled||this.emitComponentEvent({eventType:"expand"})}handleCollapse(){this.input.disabled||this.emitComponentEvent({eventType:"collapse"})}handleMenuChange({el:t,originalEvent:e,index:a}){this.toggleItemChecked(a??0,t,e)}handleMenuSelect({el:t,originalEvent:e,index:a}){this.input.collapseOnSelect&&(this.expander.expanded=!1),this.emitComponentEvent({eventType:"select",el:t,originalEvent:e,index:a})}handleMousedown(t,e){this.emitComponentEvent({eventType:"mousedown",el:e,originalEvent:t})}emitComponentEvent({eventType:t,el:e,originalEvent:a,index:n}){const c=this.getCheckedIndexes(),r=this.type==="checkbox",l={el:e,originalEvent:a};r&&c&&c.length>1?Object.assign(l,{indexes:this.getCheckedIndexes(),checked:this.getCheckedIndexes(),checkedValues:this.getCheckedValues()}):r||this.isRadio()?Object.assign(l,{index:n,checked:this.getCheckedIndexes(),checkedValues:this.getCheckedValues()}):t!=="expand"&&t!=="collapse"&&Object.assign(l,{index:n,checked:[n]}),this.emit(`${t}`,l)}onInput(t){this.state=this.getInputState(t)}onRender(){typeof window<"u"&&this._cleanupMakeup()}onMount(){this._setupMakeup()}onUpdate(){this._setupMakeup()}onDestroy(){this._cleanupMakeup()}_setupMakeup(){this.expander=new ie(this.el,{hostSelector:".menu-button__button",contentSelector:".menu-button__menu",focusManagement:"focusable",expandOnClick:!0,autoCollapse:!0,alwaysDoFocusManagement:!0})}_cleanupMakeup(){this.expander&&this.expander.destroy()}}const x="z7EDWpMx",i=N(x),we=i;q.r(x,()=>i);const V=he;i._=G(function(_,t,e,a,n,c){const{class:r,style:l,type:T,text:b,icon:y,a11yText:$,noToggleIcon:j,reverse:K,fixWidth:R,borderless:g,size:z,priority:L,disabled:W,variant:m,items:A,label:f,prefixLabel:C,prefixId:v,split:F,collapseOnSelect:ue,transparent:H,...P}=_;var o=v&&a.getElId("label"),M=m==="form",I,d=m==="overflow",p=!1,w=null;g&&(d=!1,M=!1);var E=m==="icon"||d;h=ee;var h;E?h=D:M?(I="form",p=!0):(p=!0,w=L);var O=0;t.be("span",J(Q(P),{class:X(["menu-button",r]),style:Y(l)}),"0",a,null,4,{"onexpander-expand":e.d("expander-expand","handleExpand",!1),"onexpander-collapse":e.d("expander-collapse","handleCollapse",!1),onmousedown:e.d("mousedown","handleMousedown",!1)});{const B=s=>{d?u(te,{},s,e,"1"):(f?C?(s.be("span",{class:"menu-button-prefix-label"},"2",a,null,1),s.t(C,a),s.ee(),k(s,f.renderBody,null,null,null,null,e,"3")):(s.be("span",{id:o},"4",a,null,1),k(s,f.renderBody,null,null,null,null,e,"5"),s.ee()):(y&&k(s,y,null,null,null,null,e,"6"),b&&(s.be("span",{id:o},"7",a,null,1),s.t(b,a),s.ee())),p&&!j&&u(ae,{},s,e,"8"))};h?u(h,{class:["menu-button__button"],size:z,priority:w,borderless:g,variant:I,ariaExpanded:"false",ariaHaspopup:"true",transparent:E&&H,ariaLabel:$,ariaLabelledby:o&&`${v} ${o}`,split:p?F:void 0,disabled:W,renderBody:B},t,e,"@button",[["escape","handleButtonEscape",!1]]):B(t),u(le,se(()=>{let s=0;for(const S of A||[]){let U=s++;S.separator&&O++,ne("items",{...S,checked:a.isChecked(U-O)})}},{classPrefix:"menu-button",type:T,reverse:d!==!!K,fixWidth:R,tabindex:-1}),t,e,"@content",[["keydown","handleMenuKeydown",!1],["change","handleMenuChange",!1],["select","handleMenuSelect",!1]])}t.ee()},{t:x},V);i.Component=Z(V,i._);export{we as _};
