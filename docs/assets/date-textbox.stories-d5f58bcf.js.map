{"version":3,"file":"date-textbox.stories-d5f58bcf.js","sources":["../../src/components/ebay-date-textbox/README.md","../../src/components/ebay-date-textbox/component.js","../../src/components/ebay-date-textbox/index.marko","../../src/components/ebay-date-textbox/examples/localized.marko","../../src/components/ebay-date-textbox/examples/localized.marko?raw"],"sourcesContent":["export default \"<h1 style='display: flex; justify-content: space-between; align-items: center;'>\\n    <span>\\n        ebay-date-textbox\\n    </span>\\n    <span style='font-weight: normal; font-size: medium; margin-bottom: -15px;'>\\n        DS v1.2.0\\n    </span>\\n</h1>\\n\\nDate textbox component, used as an alternative method for entering dates instead of `<input type=\\\"date\\\">`.\\n\\n## Examples and Documentation\\n\\n-   [Storybook](https://ebay.github.io/ebayui-core/?path=/story/dialogs-ebay-date-textbox)\\n-   [Storybook Docs](https://ebay.github.io/ebayui-core/?path=/docs/dialogs-ebay-date-textbox)\\n-   [Code Examples](https://github.com/eBay/ebayui-core/tree/master/src/components/ebay-date-textbox/examples)\\n\"","// @ts-check\n\nimport Expander from \"makeup-expander\";\nimport { dateArgToISO, toISO } from \"../ebay-calendar/date-utils\";\n\nconst MIN_WIDTH_FOR_DOUBLE_PANE = 600;\n\n/**\n * @typedef {import('../ebay-calendar/component').DayISO} DayISO\n * @typedef {{\n *   value?: Date | number | string,\n *   rangeEnd?: Date | number | string,\n *   locale?: string,\n *   range?: boolean,\n *   disableBefore?: Date | number | string,\n *   disableAfter?: Date | number | string,\n *   disableWeekdays?: number[],\n *   disableList?: (Date | number | string)[],\n *   inputPlaceholderText?: string | [string, string],\n *   collapseOnSelect?: boolean,\n *   getA11yShowMonthText?: (monthName: string) => string,\n *   a11yOpenPopoverText?: string,\n *   a11ySelectedText?: string,\n *   a11yRangeStartText?: string,\n *   a11yInRangeText?: string,\n *   a11yRangeEndText?: string,\n *   a11ySeparator?: string,\n * }} Input\n * @typedef {{\n *   numMonths: number,\n *   firstSelected: DayISO | null,\n *   secondSelected: DayISO | null,\n *   popover: boolean,\n * }} State\n * @extends {Marko.Component<Input, State>}\n */\nexport default class extends Marko.Component {\n    onCreate() {\n        this.state = {\n            numMonths: 1,\n            firstSelected: null,\n            secondSelected: null,\n            popover: false,\n        };\n\n        this.calculateNumMonths();\n    }\n\n    onMount() {\n        /** @type {any} */\n        this.expander = new Expander(/** @type {HTMLElement} */ (this.el), {\n            hostSelector: \".ebay-date-textbox--main > .icon-btn\",\n            contentSelector: \".date-textbox__popover\",\n            expandOnClick: true,\n            autoCollapse: true,\n        });\n    }\n\n    onDestroy() {\n        if (this.expander) this.expander.destroy();\n    }\n\n    /**\n     * @param {Input} input\n     */\n    onInput(input) {\n        if (input.value) {\n            this.state.firstSelected = dateArgToISO(input.value);\n        }\n        if (input.rangeEnd) {\n            this.state.secondSelected = dateArgToISO(input.rangeEnd);\n        }\n        if (!input.range) {\n            this.state.secondSelected = null;\n        }\n    }\n\n    calculateNumMonths() {\n        if (typeof document === \"undefined\") {\n            return;\n        }\n        this.state.numMonths =\n            document.documentElement.clientWidth < MIN_WIDTH_FOR_DOUBLE_PANE\n                ? 1\n                : 2;\n    }\n\n    /**\n     * @param {number} index\n     * @param {{\n     *   originalEvent: Event,\n     *   value: string,\n     * }} param1\n     */\n    handleInputChange(index, { value }) {\n        const valueDate = new Date(value);\n        const iso = isNaN(valueDate.getTime()) ? null : toISO(valueDate);\n        if (index === 0) {\n            this.state.firstSelected = iso;\n        } else {\n            this.state.secondSelected = iso;\n        }\n        this.emitSelectedChange();\n    }\n\n    openPopover() {\n        this.state.popover = true;\n    }\n\n    closePopover() {\n        this.state.popover = false;\n    }\n\n    /**\n     * @param {{ iso: DayISO }} param0\n     */\n    onPopoverSelect({ iso }) {\n        const { firstSelected, secondSelected } = this.state;\n\n        this.state.firstSelected = iso;\n\n        if (this.input.range) {\n            const selected = firstSelected || secondSelected;\n\n            if (firstSelected && secondSelected) {\n                // both were selected; reset selection\n                this.state.secondSelected = null;\n            } else if (selected) {\n                // exactly one was selected; figure out the order\n                if (selected < iso) {\n                    this.state.firstSelected = selected;\n                    this.state.secondSelected = iso;\n                } else {\n                    this.state.secondSelected = selected;\n                }\n                if (this.input.collapseOnSelect) {\n                    this.expander.expanded = false;\n                }\n            }\n        } else if (this.input.collapseOnSelect) {\n            this.expander.expanded = false;\n        }\n\n        this.emitSelectedChange();\n    }\n\n    emitSelectedChange() {\n        this.emit(\n            \"change\",\n            this.input.range\n                ? {\n                      rangeStart: this.state.firstSelected,\n                      rangeEnd: this.state.secondSelected,\n                  }\n                : {\n                      selected: this.state.firstSelected,\n                  }\n        );\n    }\n}\n","// @ts-check\n\n$ const openPopoverText = input.a11yOpenPopoverText ?? \"open calendar\"\n$ {\n    const defaultPlaceholder = \"YYYY-MM-DD\"\n    const [rangeStartPlaceholder, mainPlaceholder] =\n        Array.isArray(input.inputPlaceholderText)\n            ? input.inputPlaceholderText\n            : [\n                input.inputPlaceholderText ?? defaultPlaceholder,\n                input.inputPlaceholderText ?? defaultPlaceholder\n            ]\n}\n\n<span.date-textbox\n    on-expander-expand(\"openPopover\")\n    on-expander-collapse(\"closePopover\")>\n    <if(input.range)>\n        <ebay-textbox\n            placeholder=rangeStartPlaceholder\n            value=state.firstSelected\n            on-blur(\"handleInputChange\", 0)>\n        </ebay-textbox>\n    </if>\n    <ebay-textbox\n        class=\"ebay-date-textbox--main\"\n        placeholder=mainPlaceholder\n        buttonAriaLabel=openPopoverText\n        value=input.range ? state.secondSelected : state.firstSelected\n        on-blur(\"handleInputChange\", input.range ? 1 : 0)>\n        <@postfix-icon><ebay-calendar-24-icon/></@postfix-icon>\n    </ebay-textbox>\n    <div.date-textbox__popover hidden=!state.popover key=\"popover\">\n        <if(state.popover)>\n            <subscribe to=window on-resize(\"calculateNumMonths\")/>\n        </if>\n        <ebay-calendar\n            interactive\n            navigable\n            range=input.range\n            numMonths=state.numMonths\n            selected=(state.firstSelected && state.secondSelected) ? [state.firstSelected, state.secondSelected] : (state.firstSelected ?? state.secondSelected)\n            locale=input.locale\n            disableBefore=input.disableBefore\n            disableAfter=input.disableAfter\n            disableList=input.disableList\n            disableWeekdays=input.disableWeekdays\n            getA11yShowMonthText=input.getA11yShowMonthText\n            a11ySelectedText=input.a11ySelectedText\n            a11yRangeStartText=input.a11yRangeStartText\n            a11yInRangeText=input.a11yInRangeText\n            a11yRangeEndText=input.a11yRangeEndText\n            a11ySeparator=input.a11ySeparator\n            on-select(\"onPopoverSelect\")/>\n    </div>\n</span>\n","<ebay-date-textbox\n    disableBefore=new Date()\n    range\n    locale=\"af\"\n    getA11yShowMonthText=(monthName) => `Gaan na ${monthName}`\n    a11ySelectedText=\"Geselekteerde\"\n    a11yRangeStartText=\"Reeks begin\"\n    a11yInRangeText=\"Binne bereik\"\n    a11yRangeEndText=\"Reeks einde\"\n    on-change(\"emit\", \"change\")/>\n","export default \"<ebay-date-textbox\\n    disableBefore=new Date()\\n    range\\n    locale=\\\"af\\\"\\n    getA11yShowMonthText=(monthName) => `Gaan na ${monthName}`\\n    a11ySelectedText=\\\"Geselekteerde\\\"\\n    a11yRangeStartText=\\\"Reeks begin\\\"\\n    a11yInRangeText=\\\"Binne bereik\\\"\\n    a11yRangeEndText=\\\"Reeks einde\\\"\\n    on-change(\\\"emit\\\", \\\"change\\\")/>\\n\""],"names":["Readme","MIN_WIDTH_FOR_DOUBLE_PANE","_marko_component$1","Expander","input","dateArgToISO","index","value","valueDate","iso","toISO","firstSelected","secondSelected","selected","openPopoverText","_input$a11yOpenPopove","a11yOpenPopoverText","defaultPlaceholder","rangeStartPlaceholder","mainPlaceholder","Array","isArray","inputPlaceholderText","_input$inputPlacehold","_input$inputPlacehold2","out","be","_component","_componentDef","d","range","_marko_tag","_ebayTextbox","state","_ebayCalendar24Icon","Symbol","iterator","_marko_self_iterator","popover","_subscribe","window","_ebayCalendar","numMonths","_state$firstSelected","locale","disableBefore","disableAfter","disableList","disableWeekdays","getA11yShowMonthText","a11ySelectedText","a11yRangeStartText","a11yInRangeText","a11yRangeEndText","a11ySeparator","ee","t","_marko_componentType","_marko_component2","_marko_template","Component","_marko_defineComponent","_","_ebayDateTextbox","Date","monthName","concat","i","_marko_component","LocalizedTemplateCode"],"mappings":"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"}