import{t as U,r as j,b as z,d as J,p as Q,e as c,c as V}from"./registry-CyswyZw5.js";/* empty css               */import{_ as o}from"./dynamic-tag-CXXozR29.js";import{_ as W}from"./index-Dvv9KJ1o.js";import{_ as I}from"./render-tag-CLyPs9qZ.js";import{i as X,r as Y}from"./attr-tag-DphMQldM.js";import{_ as Z}from"./of-fallback-C2gEBeKK.js";import{_ as D}from"./index-kiPFcyGS.js";import{s as ee}from"./index-DbKxOVwg.js";import{a as te}from"./index-eGtaP7gF.js";class ae extends Marko.Component{handleExpand(){this.getComponent("options").elementScroll(),this.emit("expand")}handleCollapse(){this.getEl("button").focus(),this.emit("collapse")}handleListboxChange(e){this.input.collapseOnSelect===!1&&(this._expander.expanded=!1);const a=e.index;this.state.selectedIndex=a,this.emit("change",e)}handleListboxEscape(){this._expander.expanded=!1}onCreate(){this.state={selectedIndex:-1}}onInput(e){e.options=e.options||[],this.state.selectedIndex=-1;let a=0;for(const t of e.options||[]){if(t.selected){this.state.selectedIndex=a;break}a++}}onMount(){this._setupMakeup()}onUpdate(){this._setupMakeup()}onRender(){typeof window<"u"&&this._cleanupMakeup()}onDestroy(){this._cleanupMakeup()}_setupMakeup(){var a;const{input:e}=this;if((a=e.options)!=null&&a.length&&!e.disabled){const t=this.getEl("container");this._expander=new ee(t,{alwaysDoFocusManagement:!0,autoCollapse:!0,expandOnClick:!0,simulateSpacebarClick:!0,contentSelector:".listbox-button__listbox",hostSelector:".listbox-button__control",expandedClass:"listbox-button--expanded",focusManagement:"content"}),te(this.getEl("button"))}}_cleanupMakeup(){this._expander&&(this._expander.destroy(),this._expander=void 0)}}const x="GDvMqdKc",r=U(x);j.r(x,()=>r);const v=ae;r._=z(function(_,e,a,t,M,le){const{name:E,class:S,borderless:$,disabled:L,fluid:u,invalid:T,buttonName:w,options:f,truncate:m,prefixLabel:h,prefixId:g,postfixLabel:k,unselectedText:O="-",floatingLabel:d,collapseOnSelect:se,listSelection:F,variant:N,hasError:q,split:y="none",a11yIconPrefixText:A,ariaDescribedby:B,...G}=_;var s=[...f||[]][M.selectedIndex],n=s&&s.text,b=s&&s.icon,C=b&&s&&s.text,i=g&&t.getElId("label"),H=n||O,K=N==="form";function p(l,{alwaysDisplay:R}){b?(l.be("span",{id:i,class:"btn__text"},"1",t,null,1),o(l,b,null,null,null,null,a,"2"),l.ee()):(n||R)&&(l.be("span",{id:i,class:"btn__text"},"3",t,null,1),l.t(H,t),k&&(l.be("span",{class:"btn__postfix-label"},"4",t,null,1),l.t(` ${k}`,t),l.ee()),l.ee())}const P=m&&!u?"div":"span";e.be(P,J(Q(G),{class:c(["listbox-button",S,u&&"listbox-button--fluid",K&&"listbox-button--form",q&&"listbox-button--error"])}),"@container",t,null,4,{"onexpander-expand":a.d("expander-expand","handleExpand",!1),"onexpander-collapse":a.d("expander-collapse","handleCollapse",!1)}),e.be("button",{class:c(["listbox-button__control","btn",y!=="none"&&`btn--split-${y}`,$?"btn--borderless":"btn--form",m&&"btn--truncated",d&&"btn--floating-label"]),"aria-label":C&&`${A}: ${C}`,value:n,type:"button",disabled:L,name:w,"aria-haspopup":"listbox","aria-describedby":B,"aria-labelledby":i&&`${g} ${i}`,"aria-invalid":T&&"true"},"@button",t,null,0),e.be("span",{class:"btn__cell"},"5",t,null,1),d?(e.be("span",{class:c(["btn__floating-label","btn__floating-label--animate",!n&&"btn__floating-label--inline"])},"6",t,null,1),e.t(d,t),e.ee(),o(e,p,null,null,null,null,a,"7")):h?(e.be("span",{class:"btn__label"},"8",t,null,1),e.t(h,t),e.ee(),o(e,p,()=>({"always-display":!0}),null,null,null,a,"9")):o(e,p,()=>({"always-display":!0}),null,null,null,a,"10"),I(W,{},e,a,"11"),e.ee(),e.ee(),I(D,X(()=>{for(const l of Z(f||[]))Y("options",{...l,selected:s===l})},{class:"listbox-button__listbox",name:E,tabindex:-1,listSelection:F}),e,a,"@options",[["change","handleListboxChange",!1],["escape","handleListboxEscape",!1]]),e.ee()},{t:x},v);r.Component=V(v,r._);export{r as _};
