import{t as de,r as he,_ as oe,h as X,a as fe}from"./registry-08dff688.js";import{_ as ce,a as be}from"./index-0b00b731.js";import{_ as A}from"./render-tag-73fdbff3.js";import{_ as Z}from"./index-4d4607bc.js";function ge(a){const e=new Intl.Locale(a);return e.weekInfo?e.weekInfo.firstDay:0}function ue(a){const e=ge(a),s=new Intl.DateTimeFormat(a,{weekday:"short"}),t=new Date(2022,9,2+e),i=[...Array(7)].map(()=>{const o=s.format(t);return t.setDate(t.getDate()+1),o});return{firstDayOfWeek:e,weekdayLabels:i}}function Y(a){if(a)return/^\d\d\d\d-\d\d-\d\d$/g.test(a)?a:h(new Date(a))}function h(a){return a.toISOString().slice(0,10)}function k(a){return new Date(a)}function P(a,e){const s=k(a);return s.setUTCDate(s.getUTCDate()+e),h(s)}function p(a){return a||navigator.language}const Se={ArrowRight:1,ArrowLeft:-1,ArrowDown:7,ArrowUp:-7};class Ie extends Marko.Component{onCreate(e){const{firstDayOfWeek:s,weekdayLabels:t}=ue(p(e.locale)),i=h(new Date);this.state={focusISO:null,baseISO:i,tabindexISO:i,todayISO:i,offset:0,firstDayOfWeek:s,weekdayLabels:t,rangeStart:null,rangeEnd:null,disableBefore:null,disableAfter:null,disableWeekdays:[],disableList:[]}}onInput(e){var s;if(e.selected){const t=Array.isArray(e.selected)?e.selected:[e.selected],i=this.getFirstVisibleISO(),o=this.getLastVisibleISO(e);t.find(c=>c>=i&&c<=o)===void 0&&(this.state.baseISO=this.state.tabindexISO=t[0],this.state.offset=0)}if(this.calculateRangeDisplay(e),this.state.disableBefore=Y(e.disableBefore),this.state.disableAfter=Y(e.disableAfter),this.state.disableWeekdays=e.disableWeekdays??[],this.state.disableList=((s=e.disableList)==null?void 0:s.map(Y))??[],this.isDisabled(this.state.tabindexISO)){const t=this.getFirstActiveISO(e);t?this.state.tabindexISO=t:this.state.disableBefore&&this.state.tabindexISO<this.state.disableBefore?(this.state.baseISO=this.state.disableBefore,this.state.offset=0,this.state.tabindexISO=this.getFirstActiveISO(e)??this.state.disableBefore):this.state.disableAfter&&this.state.tabindexISO>this.state.disableAfter&&(this.state.baseISO=this.state.disableAfter,this.state.offset=0,this.state.tabindexISO=this.getFirstActiveISO(e)??this.state.disableAfter)}for(;this.state.disableAfter&&this.getMonthDate(this.state.offset+(e.numMonths||1)-1).toISOString()>this.state.disableAfter;)this.state.offset--}isDisabled(e){return this.state.disableBefore&&e<this.state.disableBefore||this.state.disableAfter&&e>this.state.disableAfter||this.state.disableWeekdays.includes(k(e).getUTCDay())||this.state.disableList.includes(e)}onDaySelect(e){this.emit("select",{iso:e})}onDayFocus(e){this.state.focusISO=this.state.tabindexISO=e,this.calculateRangeDisplay()}onDayBlur(){this.state.focusISO=null,this.calculateRangeDisplay()}onKeyDown(e){const s=Se[e.key];if(s){e.preventDefault();let t=7,i=this.state.tabindexISO;do i=P(i,s);while(t-- >0&&this.isDisabled(i));if(t>0){const o=this.getFirstVisibleISO(),f=this.getLastVisibleISO();i<o?this.input.navigable?this.prevMonth():i=o:i>f&&(this.input.navigable?this.nextMonth():i=f),this.setTabindexAndFocus(i),this.emit("focus",{iso:this.state.tabindexISO})}}else switch(e.key){case"PageUp":this.prevMonth(!0);break;case"PageDown":this.nextMonth(!0);break;case"Home":{const t=this.getFirstActiveISO();t&&(this.setTabindexAndFocus(t),this.emit("focus",{iso:this.state.tabindexISO}));break}case"End":{const t=this.getLastActiveISO();t&&(this.setTabindexAndFocus(t),this.emit("focus",{iso:this.state.tabindexISO}));break}}}getMonthDate(e){const s=k(this.state.baseISO);return new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth()+e))}getFirstVisibleISO(){return h(this.getMonthDate(this.state.offset))}getLastVisibleISO(e=this.input){const s=k(this.state.baseISO);return h(new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth()+this.state.offset+(e.numMonths||1),0)))}getFirstActiveISO(e=this.input){let s=this.getFirstVisibleISO();const t=this.getLastVisibleISO(e);for(;s<=t&&this.isDisabled(s);)s=P(s,1);return s>t?null:s}getLastActiveISO(e=this.input){let s=this.getLastVisibleISO(e);const t=this.getFirstVisibleISO();for(;s>=t&&this.isDisabled(s);)s=P(s,-1);return s<t?null:s}monthTitle(e){return new Intl.DateTimeFormat(p(this.input.locale),{month:"long",year:"numeric"}).format(new Date(e.getUTCFullYear(),e.getUTCMonth()))}prevMonth(e){if(this.state.disableBefore&&this.getFirstVisibleISO()<=this.state.disableBefore)return!1;this.state.offset--;let s=this.state.tabindexISO;const t=this.getLastActiveISO();return t&&this.state.tabindexISO>t&&(s=this.state.tabindexISO=t),e&&this.setTabindexAndFocus(s),this.emit("month",{iso:h(this.getMonthDate(this.state.offset))}),!0}nextMonth(e){if(this.state.disableAfter&&this.getLastVisibleISO()>=this.state.disableAfter)return!1;this.state.offset++;let s=this.state.tabindexISO;const t=this.getFirstActiveISO();return t&&this.state.tabindexISO<t&&(s=this.state.tabindexISO=t),e&&this.setTabindexAndFocus(s),this.emit("month",{iso:h(this.getMonthDate(this.state.offset+(this.input.numMonths||1)))}),!0}setTabindexAndFocus(e){this.state.tabindexISO=e,setTimeout(()=>{var s;(s=this.getEl(e))==null||s.focus()})}calculateRangeDisplay(e=this.input){if(e.selected&&e.range){let s,t;Array.isArray(e.selected)?[s,t]=e.selected:this.state.focusISO&&(s=e.selected,t=this.state.focusISO),s&&t?s<t?(this.state.rangeStart=s,this.state.rangeEnd=t):(this.state.rangeStart=t,this.state.rangeEnd=s):this.state.rangeStart=this.state.rangeEnd=null}}isInRange(e){return!(!this.state.rangeStart||!this.state.rangeEnd||e<this.state.rangeStart||e>this.state.rangeEnd)}}const K="uB4h6qrc",I=de(K),ke=I;he.r(K,()=>I);const ee=Ie;I._=oe(function(a,e,s,t,i,o){var f,c,D,T,w,x,m,F,j=a.numMonths||1,z=[...Array(j)].map((b,r)=>t.getMonthDate(i.offset+r)),q=(f=a.getA11yShowMonthText)!==null&&f!==void 0?f:b=>"Show ".concat(b),te=(c=a.a11ySelectedText)!==null&&c!==void 0?c:"selected",se=(D=a.a11yRangeStartText)!==null&&D!==void 0?D:"start of range",ae=(T=a.a11yInRangeText)!==null&&T!==void 0?T:"in range",ie=(w=a.a11yRangeEndText)!==null&&w!==void 0?w:"end of range",le=(x=a.a11yTodayText)!==null&&x!==void 0?x:"today",re=(m=a.a11yDisabledText)!==null&&m!==void 0?m:"inactive",H=(F=a.a11ySeparator)!==null&&F!==void 0?F:" - ";if(e.be("div",{class:"calendar"},"0",t,null,1),a.navigable){e.be("div",{class:"calendar__header"},"1",t,null,1),e.be("div",{class:"calendar__header--inner"},"2",t,null,1);{A(Z,{transparent:!0,size:"small",disabled:i.disableBefore&&t.getFirstVisibleISO()<=i.disableBefore,ariaLabel:q(t.monthTitle(t.getMonthDate(i.offset-1))),renderBody:r=>{A(ce,{},r,s,"4")}},e,s,"3",[["click","prevMonth",!1]]);let b=0;for(const r of z||[]){const d="[".concat(b++,"]");e.be("h3",null,"5"+d,t,null,0),e.t(t.monthTitle(r),t),e.ee()}A(Z,{transparent:!0,size:"small",disabled:i.disableAfter&&t.getLastVisibleISO()>=i.disableAfter,ariaLabel:q(t.monthTitle(t.getMonthDate(i.offset+j))),renderBody:r=>{A(be,{},r,s,"7")}},e,s,"6",[["click","nextMonth",!1]])}e.ee(),e.ee()}e.be("div",{class:"calendar__body"},"8",t,null,1);{let b=0;for(const r of z||[]){const d="[".concat(b++,"]");e.be("div",{class:"calendar__month"},"9"+d,t,null,1),e.be("table",null,"10"+d,t,null,0,{onkeydown:s.d("keydown","onKeyDown",!1)}),e.be("caption",null,"11"+d,t,null,0),e.t(t.monthTitle(r),t),e.ee(),e.be("thead",null,"12"+d,t,null,0),e.be("tr",null,"13"+d,t,null,0);{let U=0;for(const g of i.weekdayLabels||[]){const u="[".concat(U+++d,"]");e.be("th",null,"14"+u,t,null,0),e.t(g,t),e.ee()}}e.ee(),e.ee(),e.be("tbody",null,"15"+d,t,null,0);var O=(r.getUTCDay()-i.firstDayOfWeek+7)%7,N=r.getUTCFullYear(),G=r.getUTCMonth(),_=new Date(N,G+1,0).getDate();for(let U=(Math.floor((O+_)/7)-0)/1,g=0;g<=U;g++){const u=0+g*1,$="[".concat(u+d,"]");e.be("tr",null,"16"+$,t,null,0);var v=u*7-O+1,M=v+6;u===0&&O!==0?(e.e("td",{colspan:O},"17"+$,t,0,0),v=1):M>_&&(M=_);for(let ne=(M-v)/1,E=0;E<=ne;E++){const S=v+E*1,R="[".concat(S+$,"]");var l=h(new Date(Date.UTC(N,G,S))),L=l===i.todayISO,V=Array.isArray(a.selected)?a.selected.some(W=>W===l):a.selected&&a.selected===l,C=l===i.rangeStart,J=t.isInRange(l),B=l===i.rangeEnd,y=t.isDisabled(l),n=[""];if(V&&n.push(te),C&&n.push(se),!C&&!B&&J&&n.push(ae),B&&n.push(ie),e.be("td",{class:X({"calendar__cell--selected":V,"calendar__range--start":C,calendar__range:J,"calendar__range--end":B})},"18"+R,t,null,1),a.interactive)e.be("button",{disabled:y,"aria-label":n.length>1&&"".concat(S).concat(n.join(H)),tabindex:i.tabindexISO!==l&&-1,"aria-current":L&&"date","aria-pressed":V&&"true"},"@".concat(l),t,null,0,{onclick:s.d("click","onDaySelect",!1,[l]),onfocus:s.d("focus","onDayFocus",!1,[l]),onmouseover:s.d("mouseover","onDayFocus",!1,[l]),onblur:s.d("blur","onDayBlur",!1),onmouseout:s.d("mouseout","onDayBlur",!1)}),e.t(S,t),e.ee();else{L&&n.push(le),y&&n.push(re);var Q=!y&&a.linkBuilder&&a.linkBuilder(l);const W=Q?"a":"span";e.be(W,{class:X({"calendar__cell--disabled":y,"calendar__cell--current":L}),href:Q},"19"+R,t,null,0),e.t(S,t),n.length>1&&(e.be("span",{class:"clipped"},"20"+R,t,null,1),e.t(n.join(H),t),e.ee()),e.ee()}e.ee()}e.ee()}e.ee(),e.ee(),e.ee()}}e.ee(),e.ee()},{t:K},ee);I.Component=fe(ee,I._);export{ke as C,Y as d,h as t};
//# sourceMappingURL=index-86a03489.js.map
