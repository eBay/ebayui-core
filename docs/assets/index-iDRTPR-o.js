import{t as U,r as j,b as z,e as J,p as Q,f as c,d as V}from"./registry-B-klnak9.js";/* empty css               */import{_ as r}from"./dynamic-tag-DQCvkDdb.js";import{_ as W}from"./index-CL0domC_.js";import{_ as I}from"./render-tag-BBOJ9dEX.js";import{i as X,r as Y}from"./attr-tag-DphMQldM.js";import{C as Z}from"./index-BBcDbpTN.js";import{s as D}from"./index-D7B88Psz.js";import{a as ee}from"./index-eGtaP7gF.js";class te extends Marko.Component{handleExpand(){this.getComponent("options").elementScroll(),this.emit("expand")}handleCollapse(){this.getEl("button").focus(),this.emit("collapse")}handleListboxChange(e){this.input.collapseOnSelect&&(this._expander.expanded=!1);const a=e.index;this.state.selectedIndex=a,this.emit("change",e)}handleListboxEscape(){this._expander.expanded=!1}onCreate(){this.state={selectedIndex:-1}}onInput(e){const{state:a}=this;e.options=e.options||[],a.selectedIndex=Math.max(-1,e.options.findIndex(t=>t.selected)),e.collapseOnSelect=e.collapseOnSelect!==!1}onMount(){this._setupMakeup()}onUpdate(){this._setupMakeup()}onRender(){typeof window<"u"&&this._cleanupMakeup()}onDestroy(){this._cleanupMakeup()}_setupMakeup(){const{input:e}=this;if(e.options.length&&!e.disabled){const a=this.getEl("container");this._expander=new D(a,{alwaysDoFocusManagement:!0,autoCollapse:!0,expandOnClick:!0,simulateSpacebarClick:!0,contentSelector:".listbox-button__listbox",hostSelector:".listbox-button__control",expandedClass:"listbox-button--expanded",focusManagement:"content"}),ee(this.getEl("button"))}}_cleanupMakeup(){this._expander&&(this._expander.destroy(),this._expander=void 0)}}const x="GDvMqdKc",n=U(x),xe=n;j.r(x,()=>n);const v=te;n._=z(function(u,e,a,t,M,ae){const{name:S,class:E,borderless:L,disabled:$,fluid:_,invalid:T,buttonName:w,options:f,truncate:h,prefixLabel:m,prefixId:g,postfixLabel:y,unselectedText:O="-",floatingLabel:d,collapseOnSelect:le,listSelection:B,variant:F,hasError:N,split:k="none",a11yIconPrefixText:q,ariaDescribedby:A,...G}=u;var s=f[M.selectedIndex],i=s&&s.text,b=s&&s.icon,C=b&&s&&s.text,o=g&&t.getElId("label"),H=i||O,K=F==="form";function p(l,{alwaysDisplay:R}){b?(l.be("span",{id:o,class:"btn__text"},"1",t,null,1),r(l,b,null,null,null,null,a,"2"),l.ee()):(i||R)&&(l.be("span",{id:o,class:"btn__text"},"3",t,null,1),l.t(H,t),y&&(l.be("span",{class:"btn__postfix-label"},"4",t,null,1),l.t(` ${y}`,t),l.ee()),l.ee())}const P=h&&!_?"div":"span";e.be(P,J(Q(G),{class:c(["listbox-button",E,_&&"listbox-button--fluid",K&&"listbox-button--form",N&&"listbox-button--error"])}),"@container",t,null,4,{"onexpander-expand":a.d("expander-expand","handleExpand",!1),"onexpander-collapse":a.d("expander-collapse","handleCollapse",!1)}),e.be("button",{class:c(["listbox-button__control","btn",k!=="none"&&`btn--split-${k}`,L?"btn--borderless":"btn--form",h&&"btn--truncated",d&&"btn--floating-label"]),"aria-label":C&&`${q}: ${C}`,value:i,type:"button",disabled:$,name:w,"aria-haspopup":"listbox","aria-describedby":A,"aria-labelledby":o&&`${g} ${o}`,"aria-invalid":T&&"true"},"@button",t,null,0),e.be("span",{class:"btn__cell"},"5",t,null,1),d?(e.be("span",{class:c(["btn__floating-label","btn__floating-label--animate",!i&&"btn__floating-label--inline"])},"6",t,null,1),e.t(d,t),e.ee(),r(e,p,null,null,null,null,a,"7")):m?(e.be("span",{class:"btn__label"},"8",t,null,1),e.t(m,t),e.ee(),r(e,p,()=>({"always-display":!0}),null,null,null,a,"9")):r(e,p,()=>({"always-display":!0}),null,null,null,a,"10"),I(W,{},e,a,"11"),e.ee(),e.ee(),I(Z,X(()=>{for(const l of f||[])Y("options",{...l,selected:s===l})},{class:"listbox-button__listbox",name:S,tabindex:-1,listSelection:B}),e,a,"@options",[["change","handleListboxChange",!1],["escape","handleListboxEscape",!1]]),e.ee()},{t:x},v);n.Component=V(v,n._);export{xe as _};
