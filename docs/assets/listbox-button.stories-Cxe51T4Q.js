import{t as pe}from"./index-CCz6reEH.js";import{b as U,a as de}from"./utils-DWCsNc5l.js";import{t as w,r as C,b as k,e as ce,p as be,f as g,d as O}from"./registry-D0x2Lw0V.js";import{_ as me}from"./index-dZMhXc9l.js";import{_ as r}from"./render-tag-Buaq4gMc.js";import{i as l,r as i,a as v}from"./attr-tag-W-ozfNNY.js";import{C as ue}from"./index-C9jjliU2.js";import{s as xe}from"./index-D7B88Psz.js";import{a as he}from"./index-eGtaP7gF.js";import{_ as fe}from"./index-G54t06By.js";import{_ as ye}from"./const-element-DTwCHAHi.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./index-BZpHAKBe.js";/* empty css             */import"./dynamic-tag-BSuzyz1c.js";import"./index-C37XbWVa.js";import"./index-BUA-308i.js";import"./index-Ku187Omj.js";import"./index-D7GlLQHj.js";import"./index-blmbJU0z.js";import"./index--35j0Bzx.js";const _e=`<h1 style='display: flex; justify-content: space-between; align-items: center;'>
    <span>
        ebay-listbox-button
    </span>
    <span style='font-weight: normal; font-size: medium; margin-bottom: -15px;'>
        DS v1.1.0
    </span>
</h1>

## Examples and Documentation

-   [Storybook](https://ebay.github.io/ebayui-core/?path=/story/buttons-ebay-listbox-button)
-   [Storybook Docs](https://ebay.github.io/ebayui-core/?path=/docs/buttons-ebay-listbox-button)
-   [Code Examples](https://github.com/eBay/ebayui-core/tree/master/src/components/ebay-listbox-button/examples)
`;class ge extends Marko.Component{handleExpand(){this.getComponent("options").elementScroll(),this.emit("expand")}handleCollapse(){this.getEl("button").focus(),this.emit("collapse")}handleListboxChange(e){this.input.collapseOnSelect&&(this._expander.expanded=!1);const o=e.index;this.state.selectedIndex=o,this.emit("change",e)}handleListboxEscape(){this._expander.expanded=!1}onCreate(){this.state={selectedIndex:-1}}onInput(e){const{state:o}=this;e.options=e.options||[],o.selectedIndex=Math.max(-1,e.options.findIndex(t=>t.selected)),e.collapseOnSelect=e.collapseOnSelect!==!1}onMount(){this._setupMakeup()}onUpdate(){this._setupMakeup()}onRender(){typeof window<"u"&&this._cleanupMakeup()}onDestroy(){this._cleanupMakeup()}_setupMakeup(){const{input:e}=this;if(e.options.length&&!e.disabled){const o=this.getEl("container");this._expander=new xe(o,{autoCollapse:!0,expandOnClick:!0,simulateSpacebarClick:!0,contentSelector:".listbox-button__listbox",hostSelector:".listbox-button__control",expandedClass:"listbox-button--expanded",focusManagement:"content"}),he(this.getEl("button"))}}_cleanupMakeup(){this._expander&&(this._expander.destroy(),this._expander=void 0)}}const E="M/qwFgIl",p=w(E),T=p;C.r(E,()=>p);const G=ge;p._=k(function(n,e,o,t,x,$){const{name:a,class:Q,borderless:X,disabled:Y,fluid:L,invalid:Z,buttonName:ee,options:M,truncate:W,prefixLabel:B,prefixId:D,unselectedText:te="-",floatingLabel:h,collapseOnSelect:Oe,listSelection:oe,variant:ne,hasError:ae,ariaDescribedby:se,...ie}=n;var f=M[x.selectedIndex],b=f&&f.text,y=D&&t.getElId("label"),_=b||te,le=ne==="form";const re=W&&!L?"div":"span";e.be(re,ce(be(ie),{class:g(["listbox-button",Q,L&&"listbox-button--fluid",le&&"listbox-button--form",ae&&"listbox-button--error"])}),"@container",t,null,4,{"onexpander-expand":o.d("expander-expand","handleExpand",!1),"onexpander-collapse":o.d("expander-collapse","handleCollapse",!1)}),e.be("button",{class:g(["listbox-button__control","btn","btn--form",X&&"btn--borderless",W&&"btn--truncated",h&&"btn--floating-label"]),value:b,type:"button",disabled:Y,name:ee,"aria-haspopup":"listbox","aria-describedby":se,"aria-labelledby":y&&`${D} ${y}`,"aria-invalid":Z&&"true"},"@button",t,null,0),e.be("span",{class:"btn__cell"},"0",t,null,1),h?(e.be("span",{class:g(["btn__floating-label","btn__floating-label--animate",!b&&"btn__floating-label--inline"])},"1",t,null,1),e.t(h,t),e.ee(),b&&(e.be("span",{class:"btn__text"},"2",t,null,1),e.t(_,t),e.ee())):B?(e.be("span",{class:"btn__label"},"3",t,null,1),e.t(B,t),e.t(" ",t),e.ee(),e.be("span",{class:"btn__text"},"4",t,null,1),e.t(_,t),e.ee()):(e.be("span",{id:y,class:"btn__text"},"5",t,null,1),e.t(_,t),e.ee()),r(me,{},e,o,"6"),e.ee(),e.ee(),r(ue,l(()=>{for(const N of M||[])i("options",{...N,selected:f===N})},{class:"listbox-button__listbox",name:a,tabindex:-1,listSelection:oe}),e,o,"@options",[["change","handleListboxChange",!1],["escape","handleListboxEscape",!1]]),e.ee()},{t:E},G);p.Component=O(G,p._);const S="aKW7S0cT",d=w(S);C.r(S,()=>d);const J={};d._=k(function(n,e,o,t,x,$){r(T,l(()=>{i("options",l(()=>{v("description",{renderBody:a=>{a.t("Option 1 info",t)}})},{selected:!0,value:"1",text:"Option 1"})),i("options",l(()=>{v("description",{renderBody:a=>{a.t("Option 2 info",t)}})},{value:"2",text:"Option 2"})),i("options",l(()=>{v("description",{renderBody:a=>{a.t("Option 3 info",t)}})},{value:"3",text:"Option 3"}))},{prefixLabel:"Select",name:"formFieldName",...n}),e,o,"0",[["change","emit",!1,["change"]],["collapse","emit",!1,["collapse"]],["expand","emit",!1,["expand"]]])},{t:S,i:!0},J);d.Component=O(J,d._);const ve=`<ebay-listbox-button
    prefix-label="Select"
    name="formFieldName"
    onChange("emit", "change")
    onCollapse("emit", "collapse")
    onExpand("emit", "expand")
    ...input
>
    <@option selected value="1" text="Option 1">
        <@description>Option 1 info</@description>
    </@option>
    <@option value="2" text="Option 2">
        <@description>Option 2 info</@description>
    </@option>
    <@option value="3" text="Option 3">
        <@description>Option 3 info</@description>
    </@option>
</ebay-listbox-button>
`,I="4wxda5yW",c=w(I),we=ye("span",null,1).t("There was an error");C.r(I,()=>c);const P={};c._=k(function(n,e,o,t,x,$){e.be("span",{class:"field"},"0",t,null,1),r(T,l(()=>{i("options",{value:"1",text:"Option 1",selected:!0}),i("options",{value:"2",text:"Option 2"}),i("options",{value:"3",text:"Option 3"})},{name:"formFieldName",hasError:!0,ariaDescribedby:o.elId("listbox-description")}),e,o,"1"),e.be("div",{class:"field__description field__description--attention",id:o.elId("listbox-description")},"2",t,null,1),r(fe,{},e,o,"3"),e.n(we,t),e.ee(),e.ee()},{t:I,i:!0},P);c.Component=O(P,c._);const Ce=`<span class="field">
    <ebay-listbox-button name="formFieldName" hasError aria-describedby:scoped="listbox-description">
        <@option value="1" text="Option 1" selected/>
        <@option value="2" text="Option 2"/>
        <@option value="3" text="Option 3"/>
    </ebay-listbox-button>

    <div class="field__description field__description--attention" id:scoped="listbox-description">
        <ebay-attention-filled-16-icon/>
        <span>There was an error</span>
    </div>
</span>
`,ke=n=>({input:de(n)}),Je={title:"buttons/ebay-listbox-button",component:T,parameters:{docs:{description:{component:_e}}},argTypes:{selected:{description:"allows you to set the selected index option to `selected`"},borderless:{type:"boolean",control:{type:"boolean"},description:"whether button has borders "},fluid:{type:"boolean",control:{type:"boolean"},description:"whether listbox width is 100% "},buttonName:{control:{type:"text"},description:"used for the `name` attribute of the native `<button>` "},truncate:{type:"boolean",control:{type:"boolean"},description:"will truncate the text of the button onto a single line, and adds an ellipsis, when the buttons text overflows"},hasError:{type:"boolean",control:{type:"boolean"},description:"whether listbox is in an error state or not"},collapseOnSelect:{type:"boolean",control:{type:"boolean"},description:"When an option is selected, the dropdown menu collapses into the button"},listSelection:{table:{defaultValue:{summary:"manual"}},description:"If manual then user will need to press enter to select an item using keyboard. Otherwise auto will automatically select as the user presses up/down",options:["manual","auto"],type:"select"},prefixId:{control:{type:"text"},description:"id of an external element to use as the prefix label for the listbox button. Cannot be used with `prefix-label`"},floatingLabel:{control:{type:"text"},description:"The label to add that floats to the top when item is selected. Cannot be used with `prefix-label`"},unselectedText:{control:{type:"text"},description:'The text to be shown when no options are selected. Default is "-". Cannot be used with `floating-label`'},prefixLabel:{control:{type:"text"},description:"The label to add before each selected item on the button. Cannot be used with `prefix-id`"},option:{name:"@option",table:{category:"@attribute tags"}},text:{table:{control:{type:"text"},category:"@option attributes"}},value:{table:{control:{type:"value"},category:"@option attributes"}},variant:{description:"If `form`, changes appearance to match other form-specific dropdown-esque components for visual consistency.",options:["standard","form"],type:"select"},onChange:{action:"on-change",description:"Triggered on item clicked",table:{category:"Events",defaultValue:{summary:"{ el, index, selected, wasClicked }"}}},onCollapse:{action:"on-collapse",description:"Triggered on menu collapse",table:{category:"Events",defaultValue:{summary:""}}},onExpand:{action:"on-expand",description:"Triggered on menu expand",table:{category:"Events",defaultValue:{summary:""}}}}},s=ke.bind({});s.args={prefixLabel:"Selected:",options:[{value:"1",text:"Option 1"},{value:"2",text:"Option 2"},{value:"3",text:"Option 3"}]};s.parameters={docs:{source:{code:pe("ebay-listbox-button",s.args,{items:"item"})}}};const m=U(d,ve),u=U(c,Ce);var F,R,V;s.parameters={...s.parameters,docs:{...(F=s.parameters)==null?void 0:F.docs,source:{originalSource:`args => ({
  input: addRenderBodies(args)
})`,...(V=(R=s.parameters)==null?void 0:R.docs)==null?void 0:V.source}}};var q,j,z;m.parameters={...m.parameters,docs:{...(q=m.parameters)==null?void 0:q.docs,source:{originalSource:"buildExtensionTemplate(WithDescriptionTemplate, WithDescriptionTemplateCode)",...(z=(j=m.parameters)==null?void 0:j.docs)==null?void 0:z.source}}};var A,H,K;u.parameters={...u.parameters,docs:{...(A=u.parameters)==null?void 0:A.docs,source:{originalSource:"buildExtensionTemplate(WithErrorTemplate, WithErrorTemplateCode)",...(K=(H=u.parameters)==null?void 0:H.docs)==null?void 0:K.source}}};const Pe=["Default","withDescription","withError"];export{s as Default,Pe as __namedExportsOrder,Je as default,m as withDescription,u as withError};
