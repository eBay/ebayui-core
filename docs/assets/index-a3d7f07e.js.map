{"version":3,"file":"index-a3d7f07e.js","sources":["../../src/components/ebay-menu-button/component.js","../../src/components/ebay-menu-button/index.marko"],"sourcesContent":["import Expander from \"makeup-expander\";\nimport * as eventUtils from \"../../common/event-utils\";\nimport menuUtils from \"../../common/menu-utils\";\n\nexport default Object.assign({}, menuUtils, {\n    toggleItemChecked(index, itemEl, originalEvent) {\n        // This needs to be at start since toggleChecked swaps the checkedIndex\n        // and then the right events will not fire correctly\n        const shouldEmitRadio =\n            this.isRadio() && index !== this.state.checkedIndex;\n        this.toggleChecked(index);\n\n        if (shouldEmitRadio) {\n            if (this.input.collapseOnSelect) {\n                this.expander.expanded = false;\n            }\n            this.emitComponentEvent({\n                index,\n                eventType: \"change\",\n                el: itemEl,\n                originalEvent,\n            });\n        } else if (this.type !== \"radio\") {\n            if (this.input.collapseOnSelect) {\n                this.expander.expanded = false;\n            }\n            this.emitComponentEvent({\n                index,\n                eventType: !this.type ? \"select\" : \"change\",\n                el: itemEl,\n                originalEvent,\n            });\n        }\n\n        if (this.rovingTabindex) {\n            this.tabindexPosition = this.rovingTabindex.items.findIndex(\n                (el) => el.tabIndex === 0\n            );\n        }\n    },\n\n    handleItemClick(index, e, itemEl) {\n        this.toggleItemChecked(index, itemEl, e);\n    },\n\n    handleMenuKeydown({ el, originalEvent, index }) {\n        eventUtils.handleActionKeydown(originalEvent, () => {\n            this.handleItemClick(index, originalEvent, el);\n        });\n\n        eventUtils.handleEscapeKeydown(originalEvent, () => {\n            this.expander.expanded = false;\n            this.focus();\n        });\n    },\n\n    focus() {\n        this.getComponent(\"button\").el.focus();\n    },\n\n    handleButtonEscape() {\n        this.expander.expanded = false;\n    },\n\n    handleExpand() {\n        if (this.input.disabled) {\n            return;\n        }\n        this.emitComponentEvent({ eventType: \"expand\" });\n    },\n\n    handleCollapse() {\n        if (this.input.disabled) {\n            return;\n        }\n        this.emitComponentEvent({ eventType: \"collapse\" });\n    },\n\n    handleMenuChange({ el, originalEvent, index }) {\n        this.toggleItemChecked(index, el, originalEvent);\n    },\n\n    handleMenuSelect({ el, originalEvent, index }) {\n        if (this.input.collapseOnSelect) {\n            this.expander.expanded = false;\n        }\n\n        this.emitComponentEvent({\n            eventType: \"select\",\n            el,\n            originalEvent,\n            index,\n        });\n    },\n    handleMousedown({ el, originalEvent }) {\n        this.emitComponentEvent({ eventType: \"mousedown\", el, originalEvent });\n    },\n    emitComponentEvent({ eventType, el, originalEvent, index }) {\n        const checkedIndexes = this.getCheckedIndexes();\n        const isCheckbox = this.type === \"checkbox\";\n\n        const eventObj = {\n            el,\n            originalEvent,\n        };\n\n        if (isCheckbox && checkedIndexes.length > 1) {\n            Object.assign(eventObj, {\n                indexes: this.getCheckedIndexes(), // DEPRECATED in v5\n                checked: this.getCheckedIndexes(), // DEPRECATED in v5 (keep but change from indexes to values)\n                checkedValues: this.getCheckedValues(), // DEPRECATED in v5\n            });\n        } else if (isCheckbox || this.isRadio()) {\n            Object.assign(eventObj, {\n                index, // DEPRECATED in v5\n                checked: this.getCheckedIndexes(), // DEPRECATED in v5 (keep but change from indexes to values)\n                checkedValues: this.getCheckedValues(), // DEPRECATED in v5\n            });\n        } else if (eventType !== \"expand\" && eventType !== \"collapse\") {\n            Object.assign(eventObj, {\n                index, // DEPRECATED in v5\n                checked: [index], // DEPRECATED in v5 (keep but change from indexes to values)\n            });\n        }\n\n        this.emit(`${eventType}`, eventObj);\n    },\n\n    onInput(input) {\n        this.state = this.getInputState(input);\n    },\n\n    onRender() {\n        if (typeof window !== \"undefined\") {\n            this._cleanupMakeup();\n        }\n    },\n\n    onMount() {\n        this._setupMakeup();\n    },\n\n    onUpdate() {\n        this._setupMakeup();\n    },\n\n    onDestroy() {\n        this._cleanupMakeup();\n    },\n\n    _setupMakeup() {\n        this.expander = new Expander(this.el, {\n            hostSelector: \".menu-button__button\",\n            contentSelector: \".menu-button__menu\",\n            focusManagement: \"focusable\",\n            expandOnClick: true,\n            autoCollapse: true,\n            alwaysDoFocusManagement: true,\n        });\n    },\n\n    _cleanupMakeup() {\n        if (this.expander) {\n            this.expander.destroy();\n        }\n    },\n});\n","import { processHtmlAttributes } from \"../../common/html-attributes\"\nimport IconButton from '<ebay-icon-button>'\nimport Button from '<ebay-button>'\n\nstatic var ignoredAttributes = [\n    \"class\",\n    \"style\",\n    \"type\",\n    \"text\",\n    \"icon\",\n    \"a11yText\",\n    \"noToggleIcon\",\n    \"expanded\",\n    \"reverse\",\n    \"fixWidth\",\n    \"borderless\",\n    \"size\",\n    \"priority\",\n    \"iconTag\",\n    \"disabled\",\n    \"variant\",\n    \"items\",\n    \"label\",\n    \"textAlign\",\n    \"prefixLabel\",\n    \"prefixId\",\n    \"split\",\n    \"collapseOnSelect\",\n    \"transparent\"\n];\n\n$ {\n    var labelId = input.prefixId && component.getElId(\"label\");\n    var isFormVariant = input.variant === \"form\"\n    var variant;\n    var isOverflowVariant = input.variant === \"overflow\";\n    var isButtonVariant = false;\n    var priority = null;\n    if (input.borderless) {\n        // Force button variant for borderless\n        isOverflowVariant = false;\n        isFormVariant = false;\n    }\n\n    var isIconVariant = input.variant === 'icon' || isOverflowVariant;\n\n    tagName = Button\n    var tagName;\n    if (isIconVariant) {\n        tagName = IconButton;\n    } else if (isFormVariant) {\n        variant = 'form';\n        isButtonVariant = true;\n    } else {\n        isButtonVariant = true;\n        priority = input.priority\n    }\n    var separatorCount = 0;\n}\n\n<span\n    ...processHtmlAttributes(input, ignoredAttributes)\n    class=[\"menu-button\", input.class]\n    style=input.style\n    onExpander-expand(\"handleExpand\")\n    onExpander-collapse(\"handleCollapse\")\n    onMousedown(\"handleMousedown\")>\n    <${tagName}\n        class=[\n            `menu-button__button`\n        ]\n        size=input.size\n        priority=priority\n        borderless=input.borderless\n        variant=variant\n        aria-expanded=\"false\"\n        aria-haspopup=\"true\"\n        transparent=(isIconVariant && input.transparent)\n        aria-label=input.a11yText\n        aria-labelledby=(labelId && `${input.prefixId} ${labelId}`)\n        split=(isButtonVariant && input.split)\n        disabled=input.disabled\n        no-toggle-icon=input.noToggleIcon\n        on-escape(\"handleButtonEscape\")\n        key=\"button\">\n        <if(isOverflowVariant)>\n            <ebay-overflow-vertical-16-icon/>\n        </if>\n        <else>\n                <if(input.label)>\n                    <if(input.prefixLabel)>\n                        <span class=\"menu-button-prefix-label\">${input.prefixLabel}</span>\n                        <${input.label.renderBody}/>\n                    </if>\n                    <else >\n                        <span id=labelId>\n                            <${input.label.renderBody}/>\n                        </span>\n                    </else>\n                </if>\n                <else>\n                    <if(input.icon)>\n                        <${input.icon}/>\n                    </if>\n                    <if(input.text)>\n                        <span id=labelId>${input.text}</span>\n                    </if>\n                </else>\n                <if(isButtonVariant && !input.noToggleIcon)>\n                    <ebay-chevron-down-12-icon/>\n                </if>\n        </else>\n    </>\n    <ebay-menu\n        class-prefix=\"menu-button\"\n        type=input.type\n        reverse=(isOverflowVariant ? !input.reverse : input.reverse)\n        fix-width=input.fixWidth\n        tabindex=-1\n        on-keydown(\"handleMenuKeydown\")\n        on-change(\"handleMenuChange\")\n        on-select(\"handleMenuSelect\")\n        key=\"content\">\n        <for|item,index| of=(input.items || [])>\n            $ if (item.separator) {\n                separatorCount++;\n            }\n            <@item  ...item checked=component.isChecked(index - separatorCount) />\n        </for>\n    </ebay-menu>\n</span>\n"],"names":["_marko_component","menuUtils","index","itemEl","originalEvent","shouldEmitRadio","el","e","eventUtils.handleActionKeydown","eventUtils.handleEscapeKeydown","eventType","checkedIndexes","isCheckbox","eventObj","input","Expander","ignoredAttributes","_marko_registerComponent","_marko_componentType","_marko_template","_marko_component2","_","_marko_renderer","out","_componentDef","_component","state","$global","labelId","prefixId","getElId","isFormVariant","variant","isOverflowVariant","isButtonVariant","priority","borderless","isIconVariant","tagName","Button","IconButton","separatorCount","be","_marko_merge_attrs","processHtmlAttributes","_marko_class_merge","class","_marko_style_merge","style","d","_renderBody","_marko_tag","_ebayOverflowVertical16Icon","label","prefixLabel","t","ee","_marko_dynamic_tag","renderBody","icon","text","noToggleIcon","_ebayChevronDown12Icon","size","transparent","a11yText","concat","split","disabled","_items","_index","item","items","separator","push","_objectSpread","isChecked","Symbol","iterator","_marko_self_iterator","_ebayMenu","type","reverse","fixWidth","Component","_marko_defineComponent"],"mappings":"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"}