{"version":3,"file":"index-7f88cefe.js","sources":["../../src/components/ebay-lightbox-dialog/component.js","../../src/components/ebay-lightbox-dialog/index.marko"],"sourcesContent":["export default {\n    setExpandedState(isExpanded) {\n        if (isExpanded !== this.state.expanded) {\n            this.state.expanded = isExpanded;\n            if (isExpanded) {\n                this.emit(\"expanded\");\n            } else {\n                this.emit(\"collapsed\");\n            }\n        }\n    },\n\n    handleExpand() {\n        this.setExpandedState(!this.state.expanded);\n    },\n\n    handleScroll() {\n        this.setExpandedState(true);\n    },\n\n    handleTouchStart(event) {\n        const touches = event.changedTouches;\n        this.touches = [];\n        // Sometimes there can be multiple touches on an object.\n        // This saves the current touches when the user begins to tap on the handle\n        for (let i = 0; i < touches.length; i++) {\n            const { identifier, pageY } = touches[i];\n            this.touches.push({\n                identifier,\n                pageY,\n            });\n        }\n    },\n\n    handleTouchMove(event) {\n        // This will verify that a given touch moved about 30px up/down from the handle\n        // If so, then it will either expand or collapse the drawer.\n        // It uses all the saved touch start events\n        if (this.touches.length) {\n            for (let i = 0; i < event.changedTouches.length; i++) {\n                const current = event.changedTouches[i];\n                const compare = this.touches.findIndex(\n                    (item) => item.identifier === current.identifier\n                );\n                const diff = current.pageY - this.touches[compare].pageY;\n\n                if (diff > 30) {\n                    // Drag down, collpase\n                    if (this.state.expanded) {\n                        this.setExpandedState(false);\n                    } else {\n                        this.getComponent(\"dialog\").state.open = false;\n                    }\n                    this.handleTouchEnd(event);\n                } else if (diff < -30) {\n                    this.setExpandedState(true);\n                    this.handleTouchEnd(event);\n                }\n            }\n        }\n    },\n\n    handleTouchEnd(event) {\n        // Remove all matching touches from the list when the touch is over.\n        // This is done this way in case a finger is lifted up before another finger\n        for (let i = 0; i < event.changedTouches.length; i++) {\n            const current = event.changedTouches[i];\n            const idx = this.touches.findIndex(\n                (item) => item.identifier === current.identifier\n            );\n            if (idx > -1) {\n                this.touches.splice(idx, 1);\n            }\n        }\n    },\n\n    onCreate() {\n        this.state = {\n            expanded: false,\n        };\n    },\n\n    onMount() {\n        this.touches = [];\n    },\n\n    onInput(input) {\n        this.state = { expanded: input.expanded || false };\n    },\n};\n","$ var isMini = input.variant === \"_mini\";\n$ var buttonPosition = input.buttonPosition || 'right';\n$ var validSizes = ['wide', 'narrow'];\n$ var handleLabel = (!state.expanded ?\n    (input.a11yMaximizeText || \"Maximize Lightbox Dialog\") :\n    (input.a11yMinimizeText || \"Minimize Lightbox Dialog\"));\n\n<ebay-dialog-base\n    ...input\n    key=\"dialog\"\n    open=input.open\n    class-prefix=\"lightbox-dialog\"\n    on-open(\"emit\", \"open\")\n    on-close(\"emit\", \"close\")\n    on-prevButtonClick(\"emit\", \"prevButtonClick\")\n    button-position=buttonPosition\n    class=[input.class, \"lightbox-dialog--mask-fade\", input.bannerImgSrc && \"lightbox-dialog--expressive\",\n        validSizes.includes(input.size) && `lightbox-dialog--${input.size}`,\n    ]\n    window-class=[\n        \"lightbox-dialog__window--animate\",\n        isMini && \"lightbox-dialog__window--mini\",\n        state.expanded && \"lightbox-dialog__window--expanded\"\n    ]>\n        <@top>\n            <button\n                aria-label=handleLabel\n                type=\"button\"\n                class=`lightbox-dialog__handle`\n                onClick(\"handleExpand\")\n                onTouchStart(\"handleTouchStart\")\n                onTouchMove(\"handleTouchMove\")\n                onTouchEnd(\"handleTouchEnd\")\n                onTouchCancel(\"handleTouchEnd\")\n            ></button>\n            <if(input.bannerImgSrc)>\n                    <div class=\"lightbox-dialog__image\" style={\n                        backgroundImage: `url(${input.bannerImgSrc})`,\n                        backgroundPosition: input.bannerImgPosition,\n                    } />\n            </if>\n        </@top>\n</ebay-dialog-base>\n"],"names":["_marko_component","isExpanded","event","touches","i","identifier","pageY","current","compare","item","diff","idx","input","isMini","variant","buttonPosition","validSizes","handleLabel","state","expanded","a11yMinimizeText","a11yMaximizeText","_marko_tag","_ebayDialogBase","_objectSpread","open","class","bannerImgSrc","includes","size","concat","out","e","_component","_componentDef","d","_marko_style_merge","backgroundImage","backgroundPosition","bannerImgPosition","Symbol","iterator","_marko_self_iterator","t","_marko_componentType","_marko_component2","_marko_template","Component","_marko_defineComponent","_"],"mappings":"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"}