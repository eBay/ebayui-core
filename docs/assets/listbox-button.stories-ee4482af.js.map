{"version":3,"file":"listbox-button.stories-ee4482af.js","sources":["../../src/components/ebay-listbox-button/README.md","../../src/components/ebay-listbox-button/component.js","../../src/components/ebay-listbox-button/index.marko","../../src/components/ebay-listbox-button/examples/with-description.marko","../../src/components/ebay-listbox-button/examples/with-description.marko?raw"],"sourcesContent":["export default \"<h1 style='display: flex; justify-content: space-between; align-items: center;'>\\n    <span>\\n        ebay-listbox-button\\n    </span>\\n    <span style='font-weight: normal; font-size: medium; margin-bottom: -15px;'>\\n        DS v1.1.0\\n    </span>\\n</h1>\\n\\n## Examples and Documentation\\n\\n-   [Storybook](https://ebay.github.io/ebayui-core/?path=/story/buttons-ebay-listbox-button)\\n-   [Storybook Docs](https://ebay.github.io/ebayui-core/?path=/docs/buttons-ebay-listbox-button)\\n-   [Code Examples](https://github.com/eBay/ebayui-core/tree/master/src/components/ebay-listbox-button/examples)\\n\"","import Expander from \"makeup-expander\";\nimport * as scrollKeyPreventer from \"makeup-prevent-scroll-keys\";\n\nexport default {\n    handleExpand() {\n        this.getComponent(\"options\").elementScroll();\n        this.emit(\"expand\");\n    },\n\n    handleCollapse() {\n        this.getEl(\"button\").focus();\n        this.emit(\"collapse\");\n    },\n\n    handleListboxChange(event) {\n        if (this.input.collapseOnSelect) {\n            this._expander.expanded = false;\n        }\n        const selectedIndex = event.index;\n        this.state.selectedIndex = selectedIndex;\n        this.emit(\"change\", event);\n    },\n\n    handleListboxEscape() {\n        this._expander.expanded = false;\n    },\n\n    onCreate() {\n        this.state = {\n            selectedIndex: -1,\n        };\n    },\n\n    onInput(input) {\n        const { state } = this;\n        input.options = input.options || [];\n        state.selectedIndex = Math.max(\n            -1,\n            input.options.findIndex((option) => option.selected)\n        );\n        input.collapseOnSelect = input.collapseOnSelect !== false;\n    },\n\n    onMount() {\n        this._setupMakeup();\n    },\n\n    onUpdate() {\n        this._setupMakeup();\n    },\n\n    onRender() {\n        if (typeof window !== \"undefined\") {\n            this._cleanupMakeup();\n        }\n    },\n\n    onDestroy() {\n        this._cleanupMakeup();\n    },\n\n    _setupMakeup() {\n        const { input } = this;\n\n        if (input.options.length && !input.disabled) {\n            const container = this.getEl(\"container\");\n\n            this._expander = new Expander(container, {\n                autoCollapse: true,\n                expandOnClick: true,\n                simulateSpacebarClick: true,\n                contentSelector: \".listbox-button__listbox\",\n                hostSelector: \".listbox-button__control\",\n                expandedClass: \"listbox-button--expanded\",\n                focusManagement: \"content\",\n            });\n\n            scrollKeyPreventer.add(this.getEl(\"button\"));\n        }\n    },\n\n    _cleanupMakeup() {\n        if (this._expander) {\n            this._expander.destroy();\n            this._expander = undefined;\n        }\n    },\n};\n","import { processHtmlAttributes } from \"../../common/html-attributes\"\n\nstatic var ignoredAttributes = [\n    \"name\",\n    \"grow\",\n    \"borderless\",\n    \"disabled\",\n    \"fluid\",\n    \"invalid\",\n    \"buttonName\",\n    \"options\",\n    \"truncate\",\n    \"prefixLabel\",\n    \"prefixId\",\n    \"unselectedText\",\n    \"floatingLabel\",\n    \"collapseOnSelect\",\n    \"variant\"\n];\nstatic const DASH = '-';\n\n$ var selectedOption = input.options[state.selectedIndex];\n$ var selectedText = selectedOption && selectedOption.text;\n$ var labelId = input.prefixId && component.getElId(\"label\");\n$ var unselectedText = input.unselectedText || DASH;\n$ var displayText = selectedText || unselectedText;\n$ var isForm = input.variant === 'form';\n\n<${input.truncate && !input.fluid ? \"div\" : \"span\"}\n    ...processHtmlAttributes(input, ignoredAttributes)\n    key=\"container\"\n    class=[\"listbox-button\", input.class, input.fluid && \"listbox-button--fluid\", isForm && `listbox-button--form`]\n    on-expander-expand(\"handleExpand\")\n    on-expander-collapse(\"handleCollapse\")>\n    <button\n        key=\"button\"\n        class=[\n            \"listbox-button__control\",\n            'btn',\n            'btn--form',\n            input.borderless && \"btn--borderless\",\n            input.truncate && \"btn--truncated\",\n            input.floatingLabel && \"btn--floating-label\"\n        ]\n        value=selectedText\n        type=\"button\"\n        disabled=input.disabled\n        name=input.buttonName\n        aria-haspopup=\"listbox\"\n        aria-labelledby=(labelId && `${input.prefixId} ${labelId}`)\n        aria-invalid=(input.invalid && \"true\")>\n        <span class=\"btn__cell\">\n            <if (input.floatingLabel)>\n                <span class=[\n                    \"btn__floating-label\",\n                    \"btn__floating-label--animate\",\n                    !selectedText && \"btn__floating-label--inline\",\n                    ]>${input.floatingLabel}</span>\n                <if(selectedText)>\n                    <span class=\"btn__text\">${displayText}</span>\n                </if>\n            </if>\n            <else-if (input.prefixLabel)>\n                <span class=\"btn__label\">${input.prefixLabel} </span>\n                <span class=\"btn__text\">${displayText}</span>\n            </else-if>\n            <else>\n                <span id=labelId class=\"btn__text\">${displayText}</span>\n            </else>\n            <ebay-chevron-down-16-icon/>\n        </span>\n    </button>\n    <ebay-listbox\n        key=\"options\"\n        class=\"listbox-button__listbox\"\n        name=input.name\n        tabindex=-1\n        list-selection=input.listSelection\n        on-change(\"handleListboxChange\")\n        on-escape(\"handleListboxEscape\")>\n        <for|option| of=(input.options || [])>\n            <@option ...option selected=(selectedOption === option)/>\n        </for>\n    </ebay-listbox>\n</>\n","<ebay-listbox-button\n    prefix-label=\"Select\"\n    name=\"formFieldName\"\n    onChange(\"emit\", \"change\")\n    onCollapse(\"emit\", \"collapse\")\n    onExpand(\"emit\", \"expand\")\n    ...input\n>\n    <@option selected value=\"1\" text=\"Option 1\">\n        <@description>Option 1 info</@description>\n    </@option>\n    <@option value=\"2\" text=\"Option 2\">\n        <@description>Option 2 info</@description>\n    </@option>\n    <@option value=\"3\" text=\"Option 3\">\n        <@description>Option 3 info</@description>\n    </@option>\n</ebay-listbox-button>\n","export default \"<ebay-listbox-button\\n    prefix-label=\\\"Select\\\"\\n    name=\\\"formFieldName\\\"\\n    onChange(\\\"emit\\\", \\\"change\\\")\\n    onCollapse(\\\"emit\\\", \\\"collapse\\\")\\n    onExpand(\\\"emit\\\", \\\"expand\\\")\\n    ...input\\n>\\n    <@option selected value=\\\"1\\\" text=\\\"Option 1\\\">\\n        <@description>Option 1 info</@description>\\n    </@option>\\n    <@option value=\\\"2\\\" text=\\\"Option 2\\\">\\n        <@description>Option 2 info</@description>\\n    </@option>\\n    <@option value=\\\"3\\\" text=\\\"Option 3\\\">\\n        <@description>Option 3 info</@description>\\n    </@option>\\n</ebay-listbox-button>\\n\""],"names":["Readme","_marko_component$1","event","selectedIndex","input","state","option","container","Expander","scrollKeyPreventer.add","ignoredAttributes","DASH","_marko_registerComponent","_marko_componentType","_marko_template","_marko_component2","_marko_component","_","_marko_renderer","out","_componentDef","_component","$global","selectedOption","options","selectedText","text","labelId","prefixId","getElId","unselectedText","displayText","isForm","variant","_tagName","truncate","fluid","be","_marko_merge_attrs","processHtmlAttributes","_marko_class_merge","class","d","borderless","floatingLabel","disabled","buttonName","concat","invalid","t","ee","prefixLabel","_marko_tag","_ebayChevronDown16Icon","_options","push","_objectSpread","Symbol","iterator","_marko_self_iterator","_ebayListbox","name","listSelection","Component","_marko_defineComponent","_ebayListboxButton","i","WithDescriptionTemplateCode"],"mappings":"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"}