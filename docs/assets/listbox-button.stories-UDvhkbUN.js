import{t as re}from"./index-iqhZMf16.js";import{b as U,a as pe}from"./utils-NX-dnf4r.js";import{t as v,r as w,b as k,f as de,p as ce,g,d as C}from"./registry-zqrnEiYK.js";import{_ as be}from"./index-kURT6dDW.js";import{_ as r}from"./render-tag-_0PNNh6Y.js";import{_ as a}from"./self-iterator-6yU_KG2T.js";import{C as me}from"./index-mevY6pWh.js";import{s as ue}from"./index-l3FQEXUN.js";import{a as xe}from"./index-sDZ0BqWo.js";import{_ as he}from"./index-py3x4x1i.js";import{_ as fe}from"./v-element-BABk39ab.js";import"./_commonjsHelpers-5-cIlDoe.js";import"./_commonjs-dynamic-modules-h-SxKiO4.js";import"./index-T-tr__32.js";/* empty css             */import"./dynamic-tag-4Gch17f1.js";import"./index-FQXijakt.js";import"./preserve-attrs-PKQRsRTw.js";import"./index-QozpcpzM.js";import"./index-J8CKH9U9.js";import"./index-QGVtTfuc.js";import"./index-XjwwBzg5.js";import"./index-ERL0bCNR.js";const ye=`<h1 style='display: flex; justify-content: space-between; align-items: center;'>
    <span>
        ebay-listbox-button
    </span>
    <span style='font-weight: normal; font-size: medium; margin-bottom: -15px;'>
        DS v1.1.0
    </span>
</h1>

## Examples and Documentation

-   [Storybook](https://ebay.github.io/ebayui-core/?path=/story/buttons-ebay-listbox-button)
-   [Storybook Docs](https://ebay.github.io/ebayui-core/?path=/docs/buttons-ebay-listbox-button)
-   [Code Examples](https://github.com/eBay/ebayui-core/tree/master/src/components/ebay-listbox-button/examples)
`;class _e extends Marko.Component{handleExpand(){this.getComponent("options").elementScroll(),this.emit("expand")}handleCollapse(){this.getEl("button").focus(),this.emit("collapse")}handleListboxChange(e){this.input.collapseOnSelect&&(this._expander.expanded=!1);const o=e.index;this.state.selectedIndex=o,this.emit("change",e)}handleListboxEscape(){this._expander.expanded=!1}onCreate(){this.state={selectedIndex:-1}}onInput(e){const{state:o}=this;e.options=e.options||[],o.selectedIndex=Math.max(-1,e.options.findIndex(t=>t.selected)),e.collapseOnSelect=e.collapseOnSelect!==!1}onMount(){this._setupMakeup()}onUpdate(){this._setupMakeup()}onRender(){typeof window<"u"&&this._cleanupMakeup()}onDestroy(){this._cleanupMakeup()}_setupMakeup(){const{input:e}=this;if(e.options.length&&!e.disabled){const o=this.getEl("container");this._expander=new ue(o,{autoCollapse:!0,expandOnClick:!0,simulateSpacebarClick:!0,contentSelector:".listbox-button__listbox",hostSelector:".listbox-button__control",expandedClass:"listbox-button--expanded",focusManagement:"content"}),xe(this.getEl("button"))}}_cleanupMakeup(){this._expander&&(this._expander.destroy(),this._expander=void 0)}}const S="M/qwFgIl",p=v(S),O=p;w.r(S,()=>p);const G=_e;p._=k(function(s,e,o,t,x,I){const{name:n,class:i,borderless:Q,disabled:X,fluid:$,invalid:Y,buttonName:Z,options:L,truncate:M,prefixLabel:W,prefixId:B,unselectedText:ee="-",floatingLabel:h,collapseOnSelect:Ce,listSelection:te,variant:oe,hasError:ne,ariaDescribedby:ae,...se}=s;var f=L[x.selectedIndex],b=f&&f.text,y=B&&t.getElId("label"),_=b||ee,ie=oe==="form";const le=M&&!$?"div":"span";e.be(le,de(ce(se),{class:g(["listbox-button",i,$&&"listbox-button--fluid",ie&&"listbox-button--form",ne&&"listbox-button--error"])}),"@container",t,null,4,{"onexpander-expand":o.d("expander-expand","handleExpand",!1),"onexpander-collapse":o.d("expander-collapse","handleCollapse",!1)});{e.be("button",{class:g(["listbox-button__control","btn","btn--form",Q&&"btn--borderless",M&&"btn--truncated",h&&"btn--floating-label"]),value:b,type:"button",disabled:X,name:Z,"aria-haspopup":"listbox","aria-describedby":ae,"aria-labelledby":y&&`${B} ${y}`,"aria-invalid":Y&&"true"},"@button",t,null,0),e.be("span",{class:"btn__cell"},"0",t,null,1),h?(e.be("span",{class:g(["btn__floating-label","btn__floating-label--animate",!b&&"btn__floating-label--inline"])},"1",t,null,1),e.t(h,t),e.ee(),b&&(e.be("span",{class:"btn__text"},"2",t,null,1),e.t(_,t),e.ee())):W?(e.be("span",{class:"btn__label"},"3",t,null,1),e.t(W,t),e.t(" ",t),e.ee(),e.be("span",{class:"btn__text"},"4",t,null,1),e.t(_,t),e.ee()):(e.be("span",{id:y,class:"btn__text"},"5",t,null,1),e.t(_,t),e.ee()),r(be,{},e,o,"6"),e.ee(),e.ee();const D=[];for(const N of L||[])D.push({...N,selected:f===N,[Symbol.iterator]:a});r(me,{class:"listbox-button__listbox",name:n,tabindex:-1,listSelection:te,options:D},e,o,"@options",[["change","handleListboxChange",!1],["escape","handleListboxEscape",!1]])}e.ee()},{t:S},G);p.Component=C(G,p._);const E="aKW7S0cT",d=v(E);w.r(E,()=>d);const J={};d._=k(function(s,e,o,t,x,I){const n=[];n.push({selected:!0,value:"1",text:"Option 1",description:{renderBody:i=>{i.t("Option 1 info",t)},[Symbol.iterator]:a},[Symbol.iterator]:a}),n.push({value:"2",text:"Option 2",description:{renderBody:i=>{i.t("Option 2 info",t)},[Symbol.iterator]:a},[Symbol.iterator]:a}),n.push({value:"3",text:"Option 3",description:{renderBody:i=>{i.t("Option 3 info",t)},[Symbol.iterator]:a},[Symbol.iterator]:a}),r(O,{prefixLabel:"Select",name:"formFieldName",...s,options:n},e,o,"0",[["change","emit",!1,["change"]],["collapse","emit",!1,["collapse"]],["expand","emit",!1,["expand"]]])},{t:E,i:!0},J);d.Component=C(J,d._);const ge=`<ebay-listbox-button
    prefix-label="Select"
    name="formFieldName"
    onChange("emit", "change")
    onCollapse("emit", "collapse")
    onExpand("emit", "expand")
    ...input
>
    <@option selected value="1" text="Option 1">
        <@description>Option 1 info</@description>
    </@option>
    <@option value="2" text="Option 2">
        <@description>Option 2 info</@description>
    </@option>
    <@option value="3" text="Option 3">
        <@description>Option 3 info</@description>
    </@option>
</ebay-listbox-button>
`,T="4wxda5yW",c=v(T),ve=fe("span",null,"4",null,1,0).t("There was an error");w.r(T,()=>c);const P={};c._=k(function(s,e,o,t,x,I){e.be("span",{class:"field"},"0",t,null,1);{const n=[];n.push({value:"1",text:"Option 1",selected:!0,[Symbol.iterator]:a}),n.push({value:"2",text:"Option 2",[Symbol.iterator]:a}),n.push({value:"3",text:"Option 3",[Symbol.iterator]:a}),r(O,{name:"formFieldName",hasError:!0,ariaDescribedby:o.elId("listbox-description"),options:n},e,o,"1"),e.be("div",{class:"field__description field__description--attention",id:o.elId("listbox-description")},"2",t,null,1),r(he,{},e,o,"3"),e.n(ve,t),e.ee()}e.ee()},{t:T,i:!0},P);c.Component=C(P,c._);const we=`<span class="field">
    <ebay-listbox-button name="formFieldName" hasError aria-describedby:scoped="listbox-description">
        <@option value="1" text="Option 1" selected/>
        <@option value="2" text="Option 2"/>
        <@option value="3" text="Option 3"/>
    </ebay-listbox-button>

    <div class="field__description field__description--attention" id:scoped="listbox-description">
        <ebay-attention-filled-16-icon/>
        <span>There was an error</span>
    </div>
</span>
`,ke=s=>({input:pe(s)}),Je={title:"buttons/ebay-listbox-button",component:O,parameters:{docs:{description:{component:ye}}},argTypes:{selected:{description:"allows you to set the selected index option to `selected`"},borderless:{type:"boolean",control:{type:"boolean"},description:"whether button has borders "},fluid:{type:"boolean",control:{type:"boolean"},description:"whether listbox width is 100% "},buttonName:{control:{type:"text"},description:"used for the `name` attribute of the native `<button>` "},truncate:{type:"boolean",control:{type:"boolean"},description:"will truncate the text of the button onto a single line, and adds an ellipsis, when the buttons text overflows"},hasError:{type:"boolean",control:{type:"boolean"},description:"whether listbox is in an error state or not"},collapseOnSelect:{type:"boolean",control:{type:"boolean"},description:"When an option is selected, the dropdown menu collapses into the button"},listSelection:{table:{defaultValue:{summary:"manual"}},description:"If manual then user will need to press enter to select an item using keyboard. Otherwise auto will automatically select as the user presses up/down",options:["manual","auto"],type:"select"},prefixId:{control:{type:"text"},description:"id of an external element to use as the prefix label for the listbox button. Cannot be used with `prefix-label`"},floatingLabel:{control:{type:"text"},description:"The label to add that floats to the top when item is selected. Cannot be used with `prefix-label`"},unselectedText:{control:{type:"text"},description:'The text to be shown when no options are selected. Default is "-". Cannot be used with `floating-label`'},prefixLabel:{control:{type:"text"},description:"The label to add before each selected item on the button. Cannot be used with `prefix-id`"},option:{name:"@option",table:{category:"@attribute tags"}},text:{table:{control:{type:"text"},category:"@option attributes"}},value:{table:{control:{type:"value"},category:"@option attributes"}},variant:{description:"If `form`, changes appearance to match other form-specific dropdown-esque components for visual consistency.",options:["standard","form"],type:"select"},onChange:{action:"on-change",description:"Triggered on item clicked",table:{category:"Events",defaultValue:{summary:"{ el, index, selected, wasClicked }"}}},onCollapse:{action:"on-collapse",description:"Triggered on menu collapse",table:{category:"Events",defaultValue:{summary:""}}},onExpand:{action:"on-expand",description:"Triggered on menu expand",table:{category:"Events",defaultValue:{summary:""}}}}},l=ke.bind({});l.args={prefixLabel:"Selected:",options:[{value:"1",text:"Option 1"},{value:"2",text:"Option 2"},{value:"3",text:"Option 3"}]};l.parameters={docs:{source:{code:re("ebay-listbox-button",l.args,{items:"item"})}}};const m=U(d,ge),u=U(c,we);var F,R,V;l.parameters={...l.parameters,docs:{...(F=l.parameters)==null?void 0:F.docs,source:{originalSource:`args => ({
  input: addRenderBodies(args)
})`,...(V=(R=l.parameters)==null?void 0:R.docs)==null?void 0:V.source}}};var q,j,z;m.parameters={...m.parameters,docs:{...(q=m.parameters)==null?void 0:q.docs,source:{originalSource:"buildExtensionTemplate(WithDescriptionTemplate, WithDescriptionTemplateCode)",...(z=(j=m.parameters)==null?void 0:j.docs)==null?void 0:z.source}}};var A,H,K;u.parameters={...u.parameters,docs:{...(A=u.parameters)==null?void 0:A.docs,source:{originalSource:"buildExtensionTemplate(WithErrorTemplate, WithErrorTemplateCode)",...(K=(H=u.parameters)==null?void 0:H.docs)==null?void 0:K.source}}};const Pe=["Default","withDescription","withError"];export{l as Default,Pe as __namedExportsOrder,Je as default,m as withDescription,u as withError};
