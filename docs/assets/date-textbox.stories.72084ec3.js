import{b as De,a as _e}from"./utils.f000f876.js";import{t as Me}from"./index.bcb3df20.js";import{r as q,a as K,d as H,t as J,c as le}from"./merge-attrs.9e0d7be9.js";import{_ as oe}from"./index.496ee9fe.js";import{r as f}from"./render-tag.1a0b986f.js";import{a as Ve,b as Le,_ as Re}from"./index.11316807.js";import{s as Fe}from"./self-iterator.45abe0c9.js";import{_ as Ce}from"./index.f495492d.js";import{_ as de}from"./index.4eb9bcd1.js";import{s as Ee}from"./index.0b516267.js";import"./_commonjsHelpers.b8add541.js";import"./_commonjs-dynamic-modules.30ae7933.js";/* empty css             *//* empty css                       *//* empty css                    */import"./dynamic-tag.70156c9d.js";import"./index.580df348.js";import"./index.aa2d3137.js";/* empty css               *//* empty css             */import"./index.50b31a36.js";import"./index.cfa4da37.js";import"./index.34cc28ab.js";import"./index.8e5d5614.js";const Be=`<h1 style='display: flex; justify-content: space-between; align-items: center;'>
    <span>
        ebay-date-textbox
    </span>
    <span style='font-weight: normal; font-size: medium; margin-bottom: -15px;'>
        DS v1.2.0
    </span>
</h1>

Date textbox component, used as an alternative method for entering dates instead of \`<input type="date">\`.

## Examples and Documentation

-   [Storybook](https://ebay.github.io/ebayui-core/?path=/story/dialogs-ebay-date-textbox)
-   [Storybook Docs](https://ebay.github.io/ebayui-core/?path=/docs/dialogs-ebay-date-textbox)
-   [Code Examples](https://github.com/eBay/ebayui-core/tree/master/src/components/ebay-date-textbox/examples)
`;function $e(s){const e=new Intl.Locale(s);return e.weekInfo?e.weekInfo.firstDay:0}function Pe(s){const e=$e(s),a=new Intl.DateTimeFormat(s,{weekday:"short"}),t=new Date(2022,9,2+e),r=[...Array(7)].map(()=>{const d=a.format(t);return t.setDate(t.getDate()+1),d});return{firstDayOfWeek:e,weekdayLabels:r}}function k(s){if(!!s)return/^\d\d\d\d-\d\d-\d\d$/g.test(s)?s:y(new Date(s))}function y(s){return s.toISOString().slice(0,10)}function F(s){return new Date(s)}function G(s,e){const a=F(s);return a.setUTCDate(a.getUTCDate()+e),y(a)}function ce(s){return s||navigator.language}const Ye={ArrowRight:1,ArrowLeft:-1,ArrowDown:7,ArrowUp:-7};class We extends Marko.Component{onCreate(e){const{firstDayOfWeek:a,weekdayLabels:t}=Pe(ce(e.locale)),r=y(new Date);this.state={focusISO:null,baseISO:r,tabindexISO:r,todayISO:r,offset:0,firstDayOfWeek:a,weekdayLabels:t,rangeStart:null,rangeEnd:null,disableBefore:null,disableAfter:null,disableWeekdays:[],disableList:[]}}onInput(e){var a,t,r,d,n;if(e.selected){const i=Array.isArray(e.selected)?e.selected:[e.selected],b=this.getFirstVisibleISO(),u=this.getLastVisibleISO(e);i.find(p=>p>=b&&p<=u)===void 0&&(this.state.baseISO=this.state.tabindexISO=i[0],this.state.offset=0)}if(this.calculateRangeDisplay(e),this.state.disableBefore=k(e.disableBefore),this.state.disableAfter=k(e.disableAfter),this.state.disableWeekdays=(a=e.disableWeekdays)!=null?a:[],this.state.disableList=(r=(t=e.disableList)==null?void 0:t.map(k))!=null?r:[],this.isDisabled(this.state.tabindexISO)){const i=this.getFirstActiveISO(e);i?this.state.tabindexISO=i:this.state.disableBefore&&this.state.tabindexISO<this.state.disableBefore?(this.state.baseISO=this.state.disableBefore,this.state.offset=0,this.state.tabindexISO=(d=this.getFirstActiveISO(e))!=null?d:this.state.disableBefore):this.state.disableAfter&&this.state.tabindexISO>this.state.disableAfter&&(this.state.baseISO=this.state.disableAfter,this.state.offset=0,this.state.tabindexISO=(n=this.getFirstActiveISO(e))!=null?n:this.state.disableAfter)}}isDisabled(e){return this.state.disableBefore&&e<this.state.disableBefore||this.state.disableAfter&&e>this.state.disableAfter||this.state.disableWeekdays.includes(F(e).getUTCDay())||this.state.disableList.includes(e)}onDaySelect(e){this.emit("select",{iso:e})}onDayFocus(e){this.state.focusISO=this.state.tabindexISO=e,this.calculateRangeDisplay()}onDayBlur(){this.state.focusISO=null,this.calculateRangeDisplay()}onKeyDown(e){const a=Ye[e.key];if(a){e.preventDefault();let t=7,r=this.state.tabindexISO;do r=G(r,a);while(t-- >0&&this.isDisabled(r));if(t>0){const d=this.getFirstVisibleISO(),n=this.getLastVisibleISO();r<d?this.input.navigable?this.prevMonth():r=d:r>n&&(this.input.navigable?this.nextMonth():r=n),this.setTabindexAndFocus(r),this.emit("focus",{iso:this.state.tabindexISO})}}else switch(e.key){case"PageUp":this.prevMonth(!0);break;case"PageDown":this.nextMonth(!0);break;case"Home":{const t=this.getFirstActiveISO();t&&(this.setTabindexAndFocus(t),this.emit("focus",{iso:this.state.tabindexISO}));break}case"End":{const t=this.getLastActiveISO();t&&(this.setTabindexAndFocus(t),this.emit("focus",{iso:this.state.tabindexISO}));break}}}getMonthDate(e){const a=F(this.state.baseISO);return new Date(a.getUTCFullYear(),a.getUTCMonth()+e)}getFirstVisibleISO(){return y(this.getMonthDate(this.state.offset))}getLastVisibleISO(e=this.input){const a=F(this.state.baseISO);return y(new Date(a.getUTCFullYear(),a.getUTCMonth()+this.state.offset+(e.numMonths||1),0))}getFirstActiveISO(e=this.input){let a=this.getFirstVisibleISO();const t=this.getLastVisibleISO(e);for(;a<=t&&this.isDisabled(a);)a=G(a,1);return a>t?null:a}getLastActiveISO(e=this.input){let a=this.getLastVisibleISO(e);const t=this.getFirstVisibleISO();for(;a>=t&&this.isDisabled(a);)a=G(a,-1);return a<t?null:a}monthTitle(e){return new Intl.DateTimeFormat(ce(this.input.locale),{month:"long",year:"numeric"}).format(e)}prevMonth(e){if(this.state.disableBefore&&this.getFirstVisibleISO()<=this.state.disableBefore)return!1;this.state.offset--;let a=this.state.tabindexISO;const t=this.getLastActiveISO();return t&&this.state.tabindexISO>t&&(a=this.state.tabindexISO=t),e&&this.setTabindexAndFocus(a),this.emit("month",{iso:y(this.getMonthDate(this.state.offset))}),!0}nextMonth(e){if(this.state.disableAfter&&this.getLastVisibleISO()>=this.state.disableAfter)return!1;this.state.offset++;let a=this.state.tabindexISO;const t=this.getFirstActiveISO();return t&&this.state.tabindexISO<t&&(a=this.state.tabindexISO=t),e&&this.setTabindexAndFocus(a),this.emit("month",{iso:y(this.getMonthDate(this.state.offset+(this.input.numMonths||1)))}),!0}setTabindexAndFocus(e){this.state.tabindexISO=e,setTimeout(()=>{var a;(a=this.getEl(e))==null||a.focus()})}calculateRangeDisplay(e=this.input){if(e.selected&&e.range){let a,t;Array.isArray(e.selected)?[a,t]=e.selected:this.state.focusISO&&(a=e.selected,t=this.state.focusISO),a&&t?a<t?(this.state.rangeStart=a,this.state.rangeEnd=t):(this.state.rangeStart=t,this.state.rangeEnd=a):this.state.rangeStart=this.state.rangeEnd=null}}isInRange(e){return!(!this.state.rangeStart||!this.state.rangeEnd||e<this.state.rangeStart||e>this.state.rangeEnd)}}const Q="uB4h6qrc",w=J(Q);q.exports.r(Q,()=>w);const ge=We;w._=K(function(s,e,a,t,r,d){var n,i,b,u,g,p,S,x,_=s.numMonths||1,ee=[...Array(_)].map((m,o)=>t.getMonthDate(r.offset+o)),te=(n=s.getA11yShowMonthText)!==null&&n!==void 0?n:m=>"Show ".concat(m),ve=(i=s.a11ySelectedText)!==null&&i!==void 0?i:"selected",Te=(b=s.a11yRangeStartText)!==null&&b!==void 0?b:"start of range",Ie=(u=s.a11yInRangeText)!==null&&u!==void 0?u:"in range",Oe=(g=s.a11yRangeEndText)!==null&&g!==void 0?g:"end of range",ke=(p=s.a11yTodayText)!==null&&p!==void 0?p:"today",we=(S=s.a11yDisabledText)!==null&&S!==void 0?S:"inactive",ae=(x=s.a11ySeparator)!==null&&x!==void 0?x:" - ";if(e.be("div",{class:"calendar"},"0",t,null,1),s.navigable){e.be("div",{class:"calendar__header"},"1",t,null,1),e.be("div",{class:"calendar__header--inner"},"2",t,null,1);{f(de,{transparent:!0,size:"small",disabled:r.disableBefore&&t.getFirstVisibleISO()<=r.disableBefore,ariaLabel:te(t.monthTitle(t.getMonthDate(r.offset-1))),renderBody:o=>{f(Ve,{},o,a,"4")}},e,a,"3",[["click","prevMonth",!1]]);let m=0;for(const o of ee||[]){const h="[".concat(m++,"]");e.be("h3",null,"5"+h,t,null,0),e.t(t.monthTitle(o),t),e.ee()}f(de,{transparent:!0,size:"small",disabled:r.disableAfter&&t.getLastVisibleISO()>=r.disableAfter,ariaLabel:te(t.monthTitle(t.getMonthDate(r.offset+_))),renderBody:o=>{f(Le,{},o,a,"7")}},e,a,"6",[["click","nextMonth",!1]])}e.ee(),e.ee()}e.be("div",{class:"calendar__body"},"8",t,null,1);{let m=0;for(const o of ee||[]){const h="[".concat(m++,"]");e.be("div",{class:"calendar__month"},"9"+h,t,null,1),e.be("table",null,"10"+h,t,null,0,{onkeydown:a.d("keydown","onKeyDown",!1)}),e.be("caption",null,"11"+h,t,null,0),e.t(t.monthTitle(o),t),e.ee(),e.be("thead",null,"12"+h,t,null,0),e.be("tr",null,"13"+h,t,null,0);{let W=0;for(const v of r.weekdayLabels||[]){const T="[".concat(W+++h,"]");e.be("th",null,"14"+T,t,null,0),e.t(v,t),e.ee()}}e.ee(),e.ee(),e.be("tbody",null,"15"+h,t,null,0);var M=(o.getUTCDay()-r.firstDayOfWeek+7)%7,se=o.getUTCFullYear(),re=o.getUTCMonth(),C=new Date(se,re+1,0).getDate();for(let W=(Math.floor((M+C)/7)-0)/1,v=0;v<=W;v++){const T=0+v*1,U="[".concat(T+h,"]");e.be("tr",null,"16"+U,t,null,0);var V=T*7-M+1,E=V+6;T===0&&M!==0?(e.e("td",{colspan:M},"17"+U,t,0,0),V=1):E>C&&(E=C);for(let Ae=(E-V)/1,N=0;N<=Ae;N++){const I=V+N*1,z="[".concat(I+U,"]");var l=y(new Date(se,re,I)),B=l===r.todayISO,$=Array.isArray(s.selected)?s.selected.some(j=>j===l):s.selected&&s.selected===l,P=l===r.rangeStart,ne=t.isInRange(l),Y=l===r.rangeEnd,L=t.isDisabled(l),c=[""];if($&&c.push(ve),P&&c.push(Te),!P&&!Y&&ne&&c.push(Ie),Y&&c.push(Oe),e.be("td",{class:le({"calendar__cell--selected":$,"calendar__range--start":P,calendar__range:ne,"calendar__range--end":Y})},"18"+z,t,null,1),s.interactive)e.be("button",{disabled:L,"aria-label":c.length>1&&"".concat(I).concat(c.join(ae)),tabindex:r.tabindexISO!==l&&-1,"aria-current":B&&"date","aria-pressed":$&&"true"},"@".concat(l),t,null,0,{onclick:a.d("click","onDaySelect",!1,[l]),onfocus:a.d("focus","onDayFocus",!1,[l]),onmouseover:a.d("mouseover","onDayFocus",!1,[l]),onblur:a.d("blur","onDayBlur",!1),onmouseout:a.d("mouseout","onDayBlur",!1)}),e.t(I,t),e.ee();else{B&&c.push(ke),L&&c.push(we);var ie=!L&&s.linkBuilder&&s.linkBuilder(l);const j=ie?"a":"span";e.be(j,{class:le({"calendar__cell--disabled":L,"calendar__cell--current":B}),href:ie},"19"+z,t,null,0),e.t(I,t),c.length>1&&(e.be("span",{class:"clipped"},"20"+z,t,null,1),e.t(c.join(ae),t),e.ee()),e.ee()}e.ee()}e.ee()}e.ee(),e.ee(),e.ee()}}e.ee(),e.ee()},{t:Q},ge);w.Component=H(ge,w._);const Ue=600;class Ne extends Marko.Component{onCreate(){this.state={numMonths:1,firstSelected:null,secondSelected:null,popover:!1},this.calculateNumMonths()}onMount(){this.expander=new Ee(this.el,{hostSelector:".ebay-date-textbox--main > .icon-btn",contentSelector:".date-textbox__popover",expandOnClick:!0,autoCollapse:!0})}onDestroy(){this.expander&&this.expander.destroy()}onInput(e){e.value&&(this.state.firstSelected=k(e.value)),e.rangeEnd&&(this.state.secondSelected=k(e.rangeEnd)),e.range||(this.state.secondSelected=null)}calculateNumMonths(){typeof document>"u"||(this.state.numMonths=document.documentElement.clientWidth<Ue?1:2)}handleInputChange(e,{value:a}){const t=new Date(a),r=isNaN(t.getTime())?null:y(t);e===0?this.state.firstSelected=r:this.state.secondSelected=r,this.emitSelectedChange()}openPopover(){this.state.popover=!0}closePopover(){this.state.popover=!1}onPopoverSelect({iso:e}){const{firstSelected:a,secondSelected:t}=this.state;if(this.state.firstSelected=e,this.input.range){const r=a||t;a&&t?this.state.secondSelected=null:r&&(r<e?(this.state.firstSelected=r,this.state.secondSelected=e):this.state.secondSelected=r,this.input.collapseOnSelect&&(this.expander.expanded=!1))}else this.input.collapseOnSelect&&(this.expander.expanded=!1);this.emitSelectedChange()}emitSelectedChange(){this.emit("change",this.input.range?{rangeStart:this.state.firstSelected,rangeEnd:this.state.secondSelected}:{selected:this.state.firstSelected})}}const X="mSPRAI2e",A=J(X),me=A;q.exports.r(X,()=>A);const Se=Ne;A._=K(function(s,e,a,t,r,d){var n,i,b,u;const g=(n=s.a11yOpenPopoverText)!==null&&n!==void 0?n:"open calendar",p="YYYY-MM-DD",[S,x]=Array.isArray(s.inputPlaceholderText)?s.inputPlaceholderText:[(i=s.inputPlaceholderText)!==null&&i!==void 0?i:p,(b=s.inputPlaceholderText)!==null&&b!==void 0?b:p];e.be("span",{class:"date-textbox"},"0",t,null,1,{"onexpander-expand":a.d("expander-expand","openPopover",!1),"onexpander-collapse":a.d("expander-collapse","closePopover",!1)}),s.range&&f(oe,{placeholder:S,value:r.firstSelected},e,a,"1",[["blur","handleInputChange",!1,[0]]]),f(oe,{class:"ebay-date-textbox--main",placeholder:x,buttonAriaLabel:g,value:s.range?r.secondSelected:r.firstSelected,postfixIcon:{renderBody:_=>{f(Re,{},_,a,"3")},[Symbol.iterator]:Fe}},e,a,"2",[["blur","handleInputChange",!1,[s.range?1:0]]]),e.be("div",{hidden:!r.popover,class:"date-textbox__popover"},"@popover",t,null,0),r.popover&&f(Ce,{to:typeof window=="object"&&window,__events:["on","resize"]},e,a,"4",[["resize","calculateNumMonths",!1]]),f(w,{interactive:!0,navigable:!0,range:s.range,numMonths:r.numMonths,selected:r.firstSelected&&r.secondSelected?[r.firstSelected,r.secondSelected]:(u=r.firstSelected)!==null&&u!==void 0?u:r.secondSelected,locale:s.locale,disableBefore:s.disableBefore,disableAfter:s.disableAfter,disableList:s.disableList,disableWeekdays:s.disableWeekdays,getA11yShowMonthText:s.getA11yShowMonthText,a11ySelectedText:s.a11ySelectedText,a11yRangeStartText:s.a11yRangeStartText,a11yInRangeText:s.a11yInRangeText,a11yRangeEndText:s.a11yRangeEndText,a11ySeparator:s.a11ySeparator},e,a,"5",[["select","onPopoverSelect",!1]]),e.ee(),e.ee()},{t:X},Se);A.Component=H(Se,A._);const Z="l2ccq64P",D=J(Z);q.exports.r(Z,()=>D);const xe={};D._=K(function(s,e,a,t,r,d){f(me,{disableBefore:new Date,range:!0,locale:"af",getA11yShowMonthText:n=>"Gaan na ".concat(n),a11ySelectedText:"Geselekteerde",a11yRangeStartText:"Reeks begin",a11yInRangeText:"Binne bereik",a11yRangeEndText:"Reeks einde"},e,a,"0",[["change","emit",!1,["change"]]])},{t:Z,i:!0},xe);D.Component=H(xe,D._);const ze=`<ebay-date-textbox
    disableBefore=new Date()
    range
    locale="af"
    getA11yShowMonthText=(monthName) => \`Gaan na \${monthName}\`
    a11ySelectedText="Geselekteerde"
    a11yRangeStartText="Reeks begin"
    a11yInRangeText="Binne bereik"
    a11yRangeEndText="Reeks einde"
    on-change("emit", "change")/>
`,je=s=>({input:_e(s)}),yt={title:"form input/ebay-date-textbox",component:me,parameters:{docs:{description:{component:Be}}},argTypes:{value:{type:"date",control:{type:"date"},description:"Selected date",table:{defaultValue:{summary:"undefined"}}},range:{type:"boolean",control:{type:"boolean"},description:"True if selecting a range, false if a single value",table:{defaultValue:{summary:"false"}}},rangeEnd:{type:"date",control:{type:"date"},description:"If range is true, the end of the selected range",table:{defaultValue:{summary:"undefined"}}},locale:{type:"text",control:{type:"text"},description:"Locale of the date picker",table:{defaultValue:{summary:"navigator.language"}}},disableBefore:{type:"date",control:{type:"date"},description:"First date that may be selected. Should be an ISO string, but also accepts a timestamp or `Date` object",table:{defaultValue:{summary:"undefined"}}},disableAfter:{type:"date",control:{type:"date"},description:"Last date that may be selected. Should be an ISO string, but also accepts a timestamp or `Date` object",table:{defaultValue:{summary:"undefined"}}},disableWeekdays:{type:"array",control:{type:"array"},description:"List of weekdays that are disabled. Must be an array of numbers, where Sunday is `0` and Saturday is `6`",table:{defaultValue:{summary:"undefined"}}},disableList:{type:"array",control:{type:"array"},description:"List of specific days that are disabled. Should be a list of ISO strings, but also accepts timestamps or `Date` objects",table:{defaultValue:{summary:"undefined"}}},collapseOnSelect:{type:"boolean",control:{type:"boolean"},description:"Whether the calendar should collapse after a date is selected",table:{defaultValue:{summary:"false"}}},getA11yShowMonthText:{type:"callback",control:{type:"callback"},description:"Function used to get the text for showing previous and next months",table:{defaultValue:{summary:"(monthName) => `Show ${monthName}`"}}},a11ySelectedText:{type:"text",control:{type:"text"},description:"Text to be read by screen readers when a date is selected",table:{defaultValue:{summary:"selected"}}},a11yRangeStartText:{type:"text",control:{type:"text"},description:"Text to be read by screen readers when a date is the start of a range",table:{defaultValue:{summary:"start of range"}}},a11yInRangeText:{type:"text",control:{type:"text"},description:"Text to be read by screen readers when a date is in a range",table:{defaultValue:{summary:"in range"}}},a11yRangeEndText:{type:"text",control:{type:"text"},description:"Text to be read by screen readers when a date is the end of a range",table:{defaultValue:{summary:"end of range"}}},a11ySeparator:{type:"text",control:{type:"text"},description:"Text to be read by screen readers to separate properties",table:{defaultValue:{summary:" - "}}},a11yOpenPopoverText:{type:"text",control:{type:"text"},description:"A11y label for the button that opens the calendar popover",table:{defaultValue:{summary:"open calendar"}}},inputPlaceholderText:{type:"text|array",control:{type:"object"},description:'Text for the input placeholder. Should indicate that users need to enter dates in ISO format. If separate placeholders are required for a range display, use an array of two strings (i. e. `["Start (YYYY-MM-DD)", "End (YYYY-MM-DD)"]`).',table:{defaultValue:{summary:'"YYYY-MM-DD"'}}},onChange:{action:"on-change",description:"Triggered when the selection changes",table:{category:"Events",defaultValue:{summary:"{ selected } | { rangeStart, rangeEnd }"}}}}},O=je.bind({});O.parameters={docs:{source:{code:Me("ebay-date-textbox",{})}}};const R=De(D,ze);var he,fe,be;O.parameters={...O.parameters,docs:{...(he=O.parameters)==null?void 0:he.docs,source:{originalSource:`args => ({
  input: addRenderBodies(args)
})`,...(be=(fe=O.parameters)==null?void 0:fe.docs)==null?void 0:be.source}}};var ue,pe,ye;R.parameters={...R.parameters,docs:{...(ue=R.parameters)==null?void 0:ue.docs,source:{originalSource:"buildExtensionTemplate(LocalizedTemplate, LocalizedTemplateCode)",...(ye=(pe=R.parameters)==null?void 0:pe.docs)==null?void 0:ye.source}}};const gt=["Default","Localized"];export{O as Default,R as Localized,gt as __namedExportsOrder,yt as default};
//# sourceMappingURL=date-textbox.stories.72084ec3.js.map
