import{t as T,r as V,b as $,e as b,f as A,d as g,p as _,c as G}from"./registry-CyswyZw5.js";/* empty css             */import{s as B}from"./index-htxwKVWG.js";import{_ as L}from"./of-fallback-C2gEBeKK.js";import{_ as H}from"./index-DcOOfxWY.js";import{_ as N}from"./render-tag-CLyPs9qZ.js";class U extends Marko.Component{get selectId(){return this.input.id||this.getElId("select")}handleChange(e){const{selectedIndex:s}=e.target,t=this.getEls("option")[s],r=[...this.input.options||[]][s];this.state.selectedIndex=s,this.emit("change",{index:s,selected:[String(r.value)],el:t})}handleFloatingLabelInit(){this.emit("floating-label-init")}onCreate(){this.state={selectedIndex:0}}onInput(e){this.state.selectedIndex=0;let s=0;for(const t of e.options||[]){if(t.selected){this.state.selectedIndex=s;break}s++}}onMount(){this._setupMakeup();const e=this.el.closest("form");if(e){const{selectedIndex:s}=document.getElementById(this.selectId);this.subscribeTo(e).on("reset",()=>{this.handleChange({target:{selectedIndex:s}})})}}onUpdate(){this._setupMakeup()}_setupMakeup(){this.input.floatingLabel&&(this._floatingLabel?(this._floatingLabel.refresh(),this.handleFloatingLabelInit()):document.readyState==="complete"?this.el&&(this._floatingLabel=new B(this.el),this.handleFloatingLabelInit()):this.subscribeTo(window).once("load",this._setupMakeup.bind(this)))}}const m="SmgD_pOm",o=T(m);var C=["selected","optgroup"];function j(n){return!!n.optgroup}V.r(m,()=>o);const v=U;o._=$(function(n,e,s,t,r,q){const{class:M,style:S,disabled:u,borderless:F,options:O,floatingLabel:d,isLarge:k,...w}=n,I=[...O||[]];var x=I[r.selectedIndex],p=[],c={},y=t.selectId;for(const l of I){var i=l.optgroup;i?c[i]?c[i].options.push(l):p.push(c[i]={optgroup:i,options:[l]}):p.push(l)}const f=d&&"span";f?e.be(f,{class:b(["floating-label",k&&"floating-label--large"])},"0",t,null,1):e.bf("f_0",t),d&&(e.be("label",{for:y,class:b(["floating-label__label",u&&"floating-label__label--disabled"])},"1",t,null,0),e.t(d,t),e.ee()),e.be("span",{class:b(["select",k&&"select--large",F&&"select--borderless",M]),style:A(S)},"2",t,null,1),e.be("select",g(_(w),{disabled:u,id:y}),"3",t,null,4,{onchange:s.d("change","handleChange",!1)});{let l=0;for(const a of L(p)){const E=`[${l++}]`;if(j(a)){e.be("optgroup",{label:a.optgroup},"4"+E,t,null,0);for(const h of L(a.options))e.be("option",g(_(h,C),{selected:h===x}),"@option[]",t,null,4),e.t(h.text,t),e.ee();e.ee()}else e.be("option",g(_(a,C),{selected:a===x}),"@option[]",t,null,4),e.t(a.text,t),e.ee()}}e.ee(),N(H,{},e,s,"5"),e.ee(),f?e.ee():e.ef()},{t:m},v);o.Component=G(v,o._);export{o as _};
