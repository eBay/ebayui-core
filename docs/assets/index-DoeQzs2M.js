import{a as g,r as y}from"./index-D7GlLQHj.js";function w(e){return e.charAt(0).toLowerCase()+e.slice(1)}function E(e,t,i){if(!e.shiftKey){const n=e.key;switch(n){case"Enter":case"Escape":case"PageUp":case"PageDown":case"End":case"Home":case"ArrowLeft":case"ArrowUp":case"ArrowRight":case"ArrowDown":t.dispatchEvent(new CustomEvent(w(`${n}Key${i}`),{detail:e,bubbles:!0}));break;case" ":t.dispatchEvent(new CustomEvent(`spacebarKey${i}`,{detail:e,bubbles:!0}));break;default:return}}}function f(e){E(e,this,"Down")}function L(e){e.addEventListener("keydown",f)}function _(e){e.removeEventListener("keydown",f)}const m={axis:"both",autoInit:"interactive",autoReset:"current",ignoreByDelegateSelector:null,wrap:!1};function a(e){return!e.hidden&&e.getAttribute("aria-disabled")!=="true"}function v(e,t){return t>=0&&t<e.length?a(e[t]):!1}function k(e){return e.filter(a)}function r(e){return e.findIndex(t=>a(t))}function l(e){return e.indexOf(k(e).reverse()[0])}function b(e,t,i){return e.findIndex(n=>a(n)&&n.getAttribute(t)===i)}function I(e){return b(e,"aria-checked","true")}function c(e){return b(e,"aria-selected","true")}function h(e,t){return t.ignoreByDelegateSelector!==null?[...e.querySelectorAll(t.ignoreByDelegateSelector)]:[]}function p(e,t,i){let n=-1;if(t===null||K(e,t))i===!0&&(n=l(e));else{let s=t;for(;--s>=0;)if(a(e[s])){n=s;break}}return n}function D(e,t,i){let n=-1;if(t===null)n=r(e);else if(N(e,t))i===!0&&(n=r(e));else{let s=t;for(;++s<e.length;)if(a(e[s])){n=s;break}}return n}function u(e,t,i){let n=-1;switch(e){case"none":n=null;break;case"current":n=i;break;case"interactive":n=r(t);break;case"ariaChecked":n=I(t);break;case"ariaSelected":n=c(t);break;case"ariaSelectedOrInteractive":n=c(t),n=n===-1?r(t):n;break;default:n=typeof e=="number"||e===null?e:-1}return n}function K(e,t){return t===r(e)}function N(e,t){return t===l(e)}function A(e){const t=h(this._el,this.options);(t.length===0||!t.includes(e.detail.target))&&(this.index=p(this.items,this.index,this.options.wrap))}function S(e){const t=h(this._el,this.options);(t.length===0||!t.includes(e.detail.target))&&(this.index=D(this.items,this.index,this.options.wrap))}function C(e){const t=this.indexOf(e.target.closest(this._itemSelector));v(this.items,t)&&(this.index=t)}function B(e){const t=h(this._el,this.options);(t.length===0||!t.includes(e.detail.target))&&(this.index=r(this.items))}function P(e){const t=h(this._el,this.options);(t.length===0||!t.includes(e.detail.target))&&(this.index=l(this.items))}function M(){this.options.autoReset!==null&&this.reset()}function F(e){const t=this.index;let i=this.index;const{addedNodes:n,attributeName:s,removedNodes:o,target:x,type:d}=e[0];d==="attributes"?x===this.currentItem?s==="aria-disabled"?i=this.index:s==="hidden"&&(i=r(this.items)):i=this.index:d==="childList"&&(o.length>0&&[...o].includes(this._cachedElement)?i=r(this.items):(o.length>0||n.length>0)&&(i=this.indexOf(this._cachedElement))),this._index=i,this._el.dispatchEvent(new CustomEvent("navigationModelMutation",{bubbles:!1,detail:{fromIndex:t,toIndex:i}}))}class O{constructor(t,i,n){this.options=Object.assign({},m,n),this._el=t,this._itemSelector=i}}class R extends O{constructor(t,i,n){super(t,i,n);const s=this._index,o=u(this.options.autoInit,this.items,this.index);this._index=o,this._cachedElement=this.items[o],this._el.dispatchEvent(new CustomEvent("navigationModelInit",{bubbles:!1,detail:{firstInteractiveIndex:this.firstNavigableIndex,fromIndex:s,items:this.items,toIndex:o}}))}get currentItem(){return this.items[this.index]}get items(){return[...this._el.querySelectorAll(`${this._itemSelector}`)]}get index(){return this._index}set index(t){if(t!==this.index&&v(this.items,t)){const i=this.index;this._cachedElement=this.items[t],this._index=t,this._el.dispatchEvent(new CustomEvent("navigationModelChange",{bubbles:!1,detail:{fromIndex:i,toIndex:t}}))}}indexOf(t){return this.items.indexOf(t)}reset(){const t=this.index,i=u(this.options.autoReset,this.items,this.index);i!==t&&(this._index=i,this._el.dispatchEvent(new CustomEvent("navigationModelReset",{bubbles:!1,detail:{fromIndex:t,toIndex:i}})))}}class H{constructor(t,i){this.model=i,this.el=t,this._keyPrevListener=A.bind(i),this._keyNextListener=S.bind(i),this._keyHomeListener=B.bind(i),this._keyEndListener=P.bind(i),this._clickListener=C.bind(i),this._focusExitListener=M.bind(i),this._observer=new MutationObserver(F.bind(i)),L(this.el),g(this.el);const n=i.options.axis;(n==="both"||n==="x")&&(this.el.addEventListener("arrowLeftKeyDown",this._keyPrevListener),this.el.addEventListener("arrowRightKeyDown",this._keyNextListener)),(n==="both"||n==="y")&&(this.el.addEventListener("arrowUpKeyDown",this._keyPrevListener),this.el.addEventListener("arrowDownKeyDown",this._keyNextListener)),this.el.addEventListener("homeKeyDown",this._keyHomeListener),this.el.addEventListener("endKeyDown",this._keyEndListener),this.el.addEventListener("click",this._clickListener),this.el.addEventListener("focusExit",this._focusExitListener),this._observer.observe(this.el,{childList:!0,subtree:!0,attributeFilter:["aria-disabled","hidden"],attributes:!0,attributeOldValue:!0})}destroy(){_(this.el),y(this.el),this.el.removeEventListener("arrowLeftKeyDown",this._keyPrevListener),this.el.removeEventListener("arrowRightKeyDown",this._keyNextListener),this.el.removeEventListener("arrowUpKeyDown",this._keyPrevListener),this.el.removeEventListener("arrowDownKeyDown",this._keyNextListener),this.el.removeEventListener("homeKeyDown",this._keyHomeListener),this.el.removeEventListener("endKeyDown",this._keyEndListener),this.el.removeEventListener("click",this._clickListener),this.el.removeEventListener("focusExit",this._focusExitListener),this._observer.disconnect()}}function $(e,t,i){const n=new R(e,t,i);return new H(e,n)}export{$ as c};
