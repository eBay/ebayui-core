import{t as W,r as H,b as L,d as N,p as R,e as g,f as U,c as q}from"./registry-BVpmXZbM.js";/* empty css                    */import{_ as G}from"./index-C7uY-kEp.js";import{_ as J}from"./index-CfzQm45V.js";import{_ as Q}from"./index-CNAf2Fpw.js";import{_ as l}from"./render-tag-mtfFSHEK.js";import{_ as E}from"./dynamic-tag-CptWGHl0.js";import{_ as X}from"./index-Chastsgy.js";import{i as Y,r as Z}from"./attr-tag-DphMQldM.js";import{_ as D}from"./of-fallback-C2gEBeKK.js";import{C as ee}from"./index-CI9tb4-k.js";import{s as te}from"./index-D7B88Psz.js";import{a as ae,h as ne}from"./index-blmbJU0z.js";class se extends Marko.Component{handleMenuKeydown({el:t,originalEvent:e,index:n}){ae(e,()=>{this.handleMenuSelect({index:n,originalEvent:e,el:t})}),ne(e,()=>{this.expander.expanded=!1,this.focus()})}focus(){this.getComponent("button").el.focus()}handleButtonEscape(){this.expander.expanded=!1}handleExpand(){this.emitComponentEvent({eventType:"expand"})}handleCollapse(){this.emitComponentEvent({eventType:"collapse"})}handleMenuSelect({el:t,originalEvent:e,index:n}){this.emitComponentEvent({eventType:"select",el:t,originalEvent:e,index:n})}handleMousedown(t,e){this.emitComponentEvent({eventType:"mousedown",el:e,originalEvent:t})}emitComponentEvent({eventType:t,el:e,originalEvent:n,index:h}){let r={el:e,originalEvent:n,index:h};r=Object.fromEntries(Object.entries(r).filter(([,i])=>i!==void 0)),this.emit(`${t}`,r)}onRender(){typeof window<"u"&&this._cleanupMakeup()}onMount(){this._setupMakeup()}onUpdate(){this._setupMakeup()}onDestroy(){this._cleanupMakeup()}_setupMakeup(){this.expander=new te(this.el,{hostSelector:".fake-menu-button__button",contentSelector:".fake-menu-button__menu",focusManagement:"interactive",expandOnClick:!0,autoCollapse:!0,alwaysDoFocusManagement:!0})}_cleanupMakeup(){this.expander&&this.expander.destroy()}}const _="isolDjTm",o=W(_),ye=o;H.r(_,()=>o);const T=se;o._=L(function(c,t,e,n,h,r){const{class:i,style:B,type:O,text:p,icon:d,a11yText:$,noToggleIcon:b,reverse:y,fixWidth:S,borderless:k,size:V,priority:j,disabled:F,variant:m,items:I=[],label:u,textAlign:K,transparent:A,...z}=c;var s=m==="overflow",P=m==="form",x=!0;k&&(s=!1);var v=null,f="expand-btn",M,w=m==="icon"||s,C=J;P?(f="btn",M="form"):w?(C=G,x=!1):(v=j||null,f="btn"),t.be("span",N(R(z),{class:g(["fake-menu-button",i]),style:U(B)}),"0",n,null,4,{"onexpander-expand":e.d("expander-expand","handleExpand",!1),"onexpander-collapse":e.d("expander-collapse","handleCollapse",!1),onmousedown:e.d("mousedown","handleMousedown",!1)}),l(C,{class:["fake-menu-button__button"],size:V,borderless:k,priority:v,variant:M,transparent:w&&A,iconOnly:!p&&!d&&!s,ariaExpanded:"false",ariaLabel:$,disabled:F,noToggleIcon:b,renderBody:a=>{s?l(Q,{},a,e,"1"):(a.be("span",{class:g([`${f}__cell`,u&&"menu-button__control--custom-label",K==="center"&&"expand-btn__cell--center"])},"2",n,null,1),u?E(a,u.renderBody,null,null,null,null,e,"3"):(d&&E(a,d,null,null,null,null,e,"4"),p&&(a.be("span",null,"5",n,null,0),a.t(p,n),a.ee())),x&&!b&&l(X,{},a,e,"6"),a.ee())}},t,e,"@button",[["escape","handleButtonEscape",!1]]),l(ee,Y(()=>{for(const a of D(I))Z("items",a)},{classPrefix:"fake-menu-button",type:O,reverse:s?!y:y,fixWidth:S,tabindex:-1}),t,e,"@content",[["keydown","handleMenuKeydown",!1],["select","handleMenuSelect",!1]]),t.ee()},{t:_},T);o.Component=q(T,o._);export{ye as _};
