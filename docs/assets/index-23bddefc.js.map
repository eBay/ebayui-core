{"version":3,"file":"index-23bddefc.js","sources":["../../src/components/ebay-filter-menu/component.js","../../src/components/ebay-filter-menu/index.marko"],"sourcesContent":["import * as scrollKeyPreventer from \"makeup-prevent-scroll-keys\";\nimport { createLinear } from \"makeup-roving-tabindex\";\nimport * as eventUtils from \"../../common/event-utils\";\nimport menuUtils from \"../../common/menu-utils\";\n\nexport default Object.assign({}, menuUtils, {\n    resetIndex() {\n        this._rovingTabIndex.index = 0;\n        this.lastTabIndexPosition = 0;\n    },\n\n    handleRadioClick(index, ev, itemEl) {\n        this._toggleItemChecked(index, ev, itemEl);\n    },\n\n    handleItemClick(index, ev, itemEl) {\n        const targetEv = ev.originalEvent || ev;\n        if (\n            this.input.variant !== \"form\" ||\n            targetEv.target.tagName !== \"INPUT\"\n        ) {\n            this._toggleItemChecked(index, ev, itemEl);\n        }\n    },\n\n    handleItemKeydown(index, ev, itemEl) {\n        eventUtils.handleEscapeKeydown(ev, () => {\n            // TODO: this event is not documented.\n            // Do we need it? (it is only used by the filter-menu-button)\n            this._emitComponentEvent(\"keydown\", ev, { index });\n        });\n\n        if (this.input.variant !== \"form\") {\n            eventUtils.handleActionKeydown(ev, () => {\n                this._toggleItemChecked(index, ev, itemEl);\n            });\n        }\n    },\n\n    handleFooterButtonClick(originalEvent) {\n        this._emitComponentEvent(\"footer-click\", originalEvent);\n    },\n\n    handleFormSubmit(originalEvent) {\n        this._emitComponentEvent(\"form-submit\", originalEvent);\n    },\n\n    onInput(input) {\n        this.state = this.getInputState(input);\n    },\n\n    onMount() {\n        this._setupMakeup();\n    },\n\n    onUpdate() {\n        this._setupMakeup();\n    },\n\n    onRender() {\n        if (typeof window !== \"undefined\") {\n            this._cleanupMakeup();\n        }\n    },\n\n    onDestroy() {\n        this._cleanupMakeup();\n    },\n\n    _toggleItemChecked(index, originalEvent, el) {\n        if (this.isDisabled(index)) {\n            return;\n        }\n        this.toggleChecked(index);\n        this._emitComponentEvent(\"change\", originalEvent, { el, index });\n    },\n\n    _emitComponentEvent(eventType, originalEvent, args) {\n        const { el, index } = args || {};\n        const checked = this.getCheckedValues();\n        const checkedIndex = this.getCheckedIndexes();\n        const currentChecked = this.isChecked(index);\n\n        this.emit(`${eventType}`, {\n            el,\n            checked,\n            checkedIndex,\n            originalEvent,\n            index,\n            currentChecked,\n        });\n    },\n\n    _setupMakeup() {\n        if (this.input.variant !== \"form\") {\n            this._rovingTabIndex = createLinear(this.getEl(\"menu\"), \"div\", {\n                autoInit: this.lastTabIndexPosition || \"interactive\",\n            });\n\n            scrollKeyPreventer.add(this.getEl(\"container\"));\n        }\n    },\n\n    _cleanupMakeup() {\n        if (this._rovingTabIndex) {\n            this.lastTabIndexPosition = this._rovingTabIndex.index;\n            this._rovingTabIndex.destroy();\n            this._rovingTabIndex = undefined;\n            scrollKeyPreventer.remove(this.getEl(\"container\"));\n        }\n    },\n});\n","import { processHtmlAttributes } from \"../../common/html-attributes\"\n\nstatic var ignoredAttributes = [\n    \"variant\",\n    \"footer\",\n    \"footerText\",\n    \"a11yFooterText\",\n    \"class\",\n    \"style\",\n    \"classPrefix\",\n    \"formName\",\n    \"formAction\",\n    \"formMethod\",\n    \"items\",\n    \"type\"\n];\n\nstatic var itemIgnoredAttributes = [\"checked\", \"value\", \"disabled\"];\n\n$ var isRadio = input.type === \"radio\";\n$ var prefixName = isRadio ? 'radio' : 'checkbox';\n$ var baseClass = input.classPrefix || \"filter-menu\";\n$ var isForm = input.variant === \"form\";\n<span\n    ...processHtmlAttributes(input, ignoredAttributes)\n    key=\"container\"\n    class=[input.classPrefix ? `${baseClass}__menu` : baseClass, input.class]\n    style=input.style>\n    <${isForm && \"form\"}\n        name=input.formName\n        action=input.formAction\n        method=input.formMethod\n        onSubmit(\"handleFormSubmit\")>\n        <div key=\"menu\" class=`${baseClass}__items` role=(!isForm && \"menu\")>\n            <for|item, i| of=(input.items || [])>\n                $ var isChecked = component.isChecked(i);\n                <${isForm ? \"label\" : \"div\"}\n                    ...processHtmlAttributes(item, itemIgnoredAttributes)\n                    class=[`${baseClass}__item`, item.class]\n                    role=(isRadio ? \"menuitemradio\" : \"menuitemcheckbox\")\n                    aria-checked=String(isChecked)\n                    aria-disabled=(item.disabled && \"true\")\n                    for=(isForm && component.elId(`${prefixName}-${i}`))\n                    onClick(\"handleItemClick\", i)\n                    onKeydown(\"handleItemKeydown\", i)>\n                    <if(isForm)>\n                        <if (isRadio)>\n                            <ebay-radio id:scoped=`${prefixName}-${i}` checked=isChecked on-change(\"handleRadioClick\", i)/>\n                        </if>\n                        <else>\n                            <ebay-checkbox id:scoped=`${prefixName}-${i}` checked=isChecked/>\n                        </else>\n                    </if>\n                    <else>\n                        <if (isRadio)>\n                            <span class=`${baseClass}__radio`>\n                                <if(isChecked)>\n                                    <ebay-radio-checked-18-icon/>\n                                </if>\n                                <else>\n                                    <ebay-radio-unchecked-18-icon/>\n                                </else>\n                            </span>\n                        </if>\n                        <else>\n                            <span class=`${baseClass}__checkbox`>\n                                <if(isChecked)>\n                                    <ebay-checkbox-checked-18-icon/>\n                                </if>\n                                <else>\n                                    <ebay-checkbox-unchecked-18-icon/>\n                                </else>\n                            </span>\n                        </else>\n                    </else>\n                    <span class=`${baseClass}__text`>\n                        <${item.renderBody}/>\n                    </span>\n                </>\n            </for>\n        </div>\n        <if(input.footerText || input.footer)>\n            <button\n                ...processHtmlAttributes(input.footer, ignoredAttributes)\n                type=(isForm ? \"submit\" : \"button\")\n                aria-label=`${input.a11yFooterText || (input.footer && input.footer.a11yFooterText)}`\n                class=`${baseClass}__footer`\n                onClick(!isForm && \"handleFooterButtonClick\")>\n                <if(input.footerText)>\n                    ${input.footerText}\n                </if>\n                <else>\n                    <${input.footer.renderBody}/>\n                </else>\n            </button>\n        </if>\n    </>\n</span>\n"],"names":["_marko_component","menuUtils","index","ev","itemEl","targetEv","eventUtils.handleEscapeKeydown","eventUtils.handleActionKeydown","originalEvent","input","el","eventType","args","checked","checkedIndex","currentChecked","createLinear","scrollKeyPreventer.add","scrollKeyPreventer.remove","ignoredAttributes","itemIgnoredAttributes","_marko_registerComponent","_marko_componentType","_marko_template","_marko_component2","_","_marko_renderer","out","_componentDef","_component","state","$global","isRadio","type","prefixName","baseClass","classPrefix","isForm","variant","be","_marko_merge_attrs","processHtmlAttributes","_marko_class_merge","concat","class","_marko_style_merge","style","_tagName2","formName","formAction","formMethod","d","bf","_i","item","items","i","_keyScope","isChecked","_tagName","String","disabled","elId","_marko_tag","_ebayRadio","_ebayCheckbox","_ebayRadioChecked18Icon","_ebayRadioUnchecked18Icon","ee","_ebayCheckboxChecked18Icon","_ebayCheckboxUnchecked18Icon","_marko_dynamic_tag","renderBody","footerText","footer","a11yFooterText","t","ef","Component","_marko_defineComponent"],"mappings":"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"}